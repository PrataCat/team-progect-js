{"mappings":"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","sources":["src/js/topic-list.js"],"sourcesContent":["// ------------Misa & Stas--------------\nconst debounce = require('lodash.debounce');\nconst KEY = '?api-key=OotKL5nYMsbXFbPHNmmUjf7brVnGZQ8G';\nconst URL = 'https://api.nytimes.com/svc/news/v3/content/section-list.json';\nlet categoriesArray = [];\nlet windowInnerWidth = window.innerWidth;\nconst mainCategoryList = document.querySelector('.filter__main-category-list');\nconst othersCategoryList = document.querySelector(\n  '.filter__others-category-list'\n);\nconst othersCategoryLisWrap = document.querySelector(\n  '.filter__other-category-wrap'\n);\n\nonFetch();\n\nmainCategoryList.addEventListener('click', onChooseCategory);\nmainCategoryList.addEventListener('click', onShowOthersCategories);\nothersCategoryList.addEventListener('click', onSectionSelection);\nwindow.addEventListener('resize', debounce(onReRender, 50));\n\nfunction onFetch() {\n  onFetchCategories()\n    .then(({ results }) => {\n      categoriesArray = results;\n      createCategories(categoriesArray, windowInnerWidth);\n    })\n    .catch(error => {\n      console.log(error);\n    });\n}\n\nfunction onFetchCategories() {\n  return fetch(`${URL}${KEY}`).then(res => {\n    if (!res.ok) {\n      throw new Error('error');\n    }\n    return res.json();\n  });\n}\n\nfunction createCategories(categoriesArray, windowInnerWidth) {\n  let amountOfMainCategories = 0;\n  let nameForOthersBtn = '';\n  if (windowInnerWidth >= 1280) {\n    amountOfMainCategories = 6;\n    nameForOthersBtn = 'Others';\n  } else if (windowInnerWidth > 767 && windowInnerWidth < 1280) {\n    amountOfMainCategories = 4;\n    nameForOthersBtn = 'Others';\n  } else if (windowInnerWidth <= 767) {\n    amountOfMainCategories = 0;\n    nameForOthersBtn = 'Categories';\n  }\n  createMarkupForCategories(\n    categoriesArray,\n    amountOfMainCategories,\n    nameForOthersBtn\n  );\n}\n\nfunction createMarkupForCategories(\n  categoriesArray,\n  amountOfMainCategories,\n  nameForOthersBtn\n) {\n  let markupForMainCategoryList = '';\n  let markupForOthersCategoryList = '';\n  categoriesArray.map(({ display_name }, index) => {\n    if (index < amountOfMainCategories) {\n      markupForMainCategoryList += `<li class=\"filter__main-category-item\"><button class=\"filter__main-category-btn\">${display_name}  </button></li>`;\n      return;\n    }\n    markupForOthersCategoryList += `<li class=\"filter__others-category-item\"><button class=\"filter__others-category-btn\">${display_name}</button></li>`;\n  });\n  mainCategoryList.innerHTML = markupForMainCategoryList;\n  mainCategoryList.insertAdjacentHTML(\n    'beforeend',\n    `<li class=\"filter__other-category-item\"><button class=\"filter__main-category-btn others-btn\">${nameForOthersBtn}<svg class=\"filter__main-category-btn-icon\"> <use href=\"../images/symbol-defs-mini.svg#icon-orig-mini-n-z\"> </use> </svg>\n</button></li>`\n  );\n  othersCategoryList.innerHTML = markupForOthersCategoryList;\n}\n\nfunction onChooseCategory(event) {\n  toMarkCategoryBtn(event);\n  const nameOfCategory = event.target.outerText;\n  if (!(nameOfCategory === 'Others') && !(nameOfCategory === 'Categories')) {\n    // console.log(nameOfCategory);\n  }\n}\n\nfunction toMarkCategoryBtn(event) {\n  const categoryBtnArray = document.querySelectorAll(\n    '.filter__main-category-btn'\n  );\n  for (const categoryBtn of categoryBtnArray) {\n    if (categoryBtn.classList.contains('active')) {\n      categoryBtn.classList.remove('active');\n    }\n  }\n  if (event.target.localName === 'button') {\n    event.target.classList.add('active');\n  }\n}\n\nfunction onShowOthersCategories(event) {\n  if (event.target.classList.contains('others-btn')) {\n    event.stopPropagation();\n    othersCategoryList.classList.toggle('visible');\n    othersCategoryLisWrap.classList.toggle('visible');\n    window.addEventListener('click', onCloseOthersCategories);\n  }\n}\n\nfunction onSectionSelection(e) {\n  if (e.target.localName === 'button') {\n    let section = e.target.textContent;\n    const othersLi = mainCategoryList.lastChild;\n    const otherBtn = othersLi.firstChild;\n    otherBtn.textContent = section;\n    // console.log(e.target.textContent);\n  }\n}\n\nfunction onCloseOthersCategories(event) {\n  if (\n    othersCategoryList.classList.contains('visible') &&\n    !event.target.classList.contains('filter__others-category-item') &&\n    !event.target.classList.contains('filter__others-category-list')\n  ) {\n    othersCategoryList.classList.remove('visible');\n    othersCategoryLisWrap.classList.remove('visible');\n    window.removeEventListener('click', onCloseOthersCategories);\n  }\n}\n\nfunction onReRender() {\n  if (window.innerWidth >= 1280 && windowInnerWidth < 1280) {\n    windowInnerWidth = window.innerWidth;\n    createCategories(categoriesArray, windowInnerWidth);\n  } else if (\n    window.innerWidth > 767 &&\n    window.innerWidth < 1280 &&\n    (windowInnerWidth <= 767 || windowInnerWidth >= 1280)\n  ) {\n    windowInnerWidth = window.innerWidth;\n    createCategories(categoriesArray, windowInnerWidth);\n  } else if (window.innerWidth <= 767 && windowInnerWidth > 767) {\n    windowInnerWidth = window.innerWidth;\n    createCategories(categoriesArray, windowInnerWidth);\n  }\n}\n"],"names":["$l1Gdk","parcelRequire","$ed815880f0155fe7$var$KEY","$ed815880f0155fe7$var$URL","$ed815880f0155fe7$var$categoriesArray","$ed815880f0155fe7$var$windowInnerWidth","window","innerWidth","$ed815880f0155fe7$var$mainCategoryList","document","querySelector","$ed815880f0155fe7$var$othersCategoryList","$ed815880f0155fe7$var$othersCategoryLisWrap","$ed815880f0155fe7$var$createCategories","categoriesArray1","windowInnerWidth1","amountOfMainCategories","nameForOthersBtn","categoriesArray2","markupForMainCategoryList","markupForOthersCategoryList","map","param","index","display_name","concat","innerHTML","insertAdjacentHTML","$ed815880f0155fe7$var$createMarkupForCategories","$ed815880f0155fe7$var$onCloseOthersCategories","event","classList","contains","target","remove","removeEventListener","fetch","then","res","ok","Error","json","results","catch","error","console","log","addEventListener","categoryBtnArray","querySelectorAll","_iteratorNormalCompletion","_didIteratorError","_iteratorError","undefined","_step","_iterator","Symbol","iterator","next","done","categoryBtn","value","err","return","localName","add","$ed815880f0155fe7$var$toMarkCategoryBtn","outerText","stopPropagation","toggle","e","section","textContent","lastChild","firstChild"],"version":3,"file":"index.2780aab3.js.map"}