function e(e){try{const s=n(),o=s.findIndex(((t,n)=>t.id===e));return s.splice(o,1),t(s),!0}catch(e){return console.error(e.message),!1}}function t(e){const t="Wrong data to save: array with objects is expected.";if("object"==typeof e)if(!1!==Array.isArray(e))try{const t=JSON.stringify(e);localStorage.setItem("Favorite",t)}catch(e){console.error("Set state error: ",e.message)}else console.log(t);else console.log(t)}function n(){try{const e=localStorage.getItem("Favorite");return null===e?void 0:JSON.parse(e)}catch(e){console.error(e.message)}}function s(e){!function(e){const t=o();for(key of Object.keys(t)){const n=t[key].findIndex((t=>t.id===e.id));n>-1&&(console.log(t[key]),t[key].splice(n,1))}localStorage.setItem("read",JSON.stringify(t))}(e);const t=o(),n=(new Date).toLocaleString().slice(0,10).split(".").join("/");t[n]||(t[n]=[]),t[n].push(e),localStorage.setItem("read",JSON.stringify(t))}function o(){try{const e=localStorage.getItem("read");return null===e?{}:JSON.parse(e)}catch(e){console.log(e)}}function r(e){const{abstract:t,title:s,url:r,published_date:a,image_url:i,section:c,id:l}=e,d=function(e){let t=n()||[],s=o()||{},r=Object.values(s).flat();const a=t.find((t=>e.id===t.id)),i=r.find((t=>e.id===t.id));return rezult={fav:!!a,read:!!i}}(e);return`<li class="box-news__item ${d.read?"show":""}" data-id="${l}">\n      <p class="box-news__section">${c}</p>\n          <div class="box-news___wrap-reading">\n            <span class="box-news__reading">Alredy read</span>\n            <svg class="icon" width="18" height="18">\n              <use href="#icon-check"></use>\n            </svg> \n          </div>\n          <button class="box-news__favorite-btn ${d.fav?"favorite":""}">\n              <p class="box-news__favorite-p"> ${d.fav?"Remove from Favorite":"Add to Favorite"}</p>\n              <svg class="box-news__favorite-svg" width="16" height="16"">\n                <use href="#icon-heart"></use>\n              </svg>\n            </button>\n          <article>\n            <div class="box-news__thumb">\n              <img class="box-news__img" src="${i}" loading="lazy" alt="${c}" width='440'/>\n            </div>\n          <div class="box-news__wrap-title">\n            <h2 class="box-news__titel">\n              ${s}\n            </h2>\n          </div>\n          <div class="box-news__wrap-text">\n            <p class="box-news__text">\n              ${t.length>120?t.slice(0,110)+"...":t}\n            </p>\n          </div>\n          <div class="box-news__wrap">\n            <p class="box-news__data">${a}</p>\n            <a href="${r}" class="box-news__link" target="_blank" rel="noopener noreferrer nofollow">Read more</a>\n          </div>\n          </article>\n          <div class="overlay"></div>\n        </li>`}const a=document.querySelector(".box-news"),i=document.querySelector(".footer"),c=document.querySelector(".header");function l(){const e=document.documentElement.clientWidth;return e>1280?8:e>768?7:4}function d(e){if("object"!=typeof e)return;if(!1===Array.isArray(e))return;perPage=l();const t=function(e,t,n){const s=(t-1)*n,o=s+n;return e.slice(s,o)}(n(),page=1,perPage);if(0===t.length)i.classList.add("footer-margin"),c.classList.add("header-margin"),function(e){const t=`<div class="no-results-wrap"><p class="no-results-text">${e}</p><span class="no-results-bgr"></span></div>`;a.innerHTML=t}("The favorite news list is empty");else{const e=t.map((e=>r(e)));a.insertAdjacentHTML("beforeend",e.join(""))}}a.addEventListener("click",(function(t){if("box-news__favorite-p"===t.target.classList.value){const s=t.target.closest("BUTTON");e(s.closest("li").dataset.id),a.innerHTML="",d(n())}if("A"===t.target.tagName){let e=t.target.closest("li").dataset.id,o=t.target.closest("li");const r=n();for(const t of r)if(t.id===e)return s(t),void o.classList.add("show")}})),d(n());
//# sourceMappingURL=favorite-main.b7dba58b.js.map
