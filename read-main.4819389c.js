var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},t={},n={},a=e.parcelRequire6b37;null==a&&((a=function(e){if(e in t)return t[e].exports;if(e in n){var a=n[e];delete n[e];var o={id:e,exports:{}};return t[e]=o,a.call(o.exports,o,o.exports),o.exports}var s=new Error("Cannot find module '"+e+"'");throw s.code="MODULE_NOT_FOUND",s}).register=function(e,t){n[e]=t},e.parcelRequire6b37=a);var o=a("9Ka1f"),s=a("2sH7u");o=a("9Ka1f");function r(e){const{abstract:t,title:n,url:a,published_date:r,image_url:i,section:l,id:d}=e,c=function(e){let t=(0,s.loadAllFavorites)()||[],n=(0,o.loadReadStorage)()||{},a=Object.values(n).flat();const r=t.find((t=>e.id===t.id)),i=a.find((t=>e.id===t.id));return rezult={fav:!!r,read:!!i}}(e);return`<li class="box-news__item ${c.read?"show":""}" data-id="${d}">\n      <p class="box-news__section">${l}</p>\n          <div class="box-news___wrap-reading">\n            <span class="box-news__reading">Alredy read</span>\n            <svg class="icon" width="18" height="18">\n              <use href="#icon-check"></use>\n            </svg> \n          </div>\n          <button class="box-news__favorite-btn ${c.fav?"favorite":""}">\n              <p class="box-news__favorite-p"> ${c.fav?"Remove from Favorite":"Add to Favorite"}</p>\n              <svg class="box-news__favorite-svg" width="16" height="16"">\n                <use href="#icon-heart"></use>\n              </svg>\n            </button>\n          <article>\n            <div class="box-news__thumb">\n              <img class="box-news__img" src="${i}" loading="lazy" alt="${l}" width='440'/>\n            </div>\n          <div class="box-news__wrap-title">\n            <h2 class="box-news__titel">\n              ${n}\n            </h2>\n          </div>\n          <div class="box-news__wrap-text">\n            <p class="box-news__text">\n              ${t.length>120?t.slice(0,110)+"...":t}\n            </p>\n          </div>\n          <div class="box-news__wrap">\n            <p class="box-news__data">${r}</p>\n            <a href="${a}" class="box-news__link" target="_blank" rel="noopener noreferrer nofollow">Read more</a>\n          </div>\n          </article>\n          <div class="overlay"></div>\n        </li>`}s=a("2sH7u");function i(e){const t=`<div data-date="${e}" class="dateList-wrap">\n    <div class="span-wrap">\n      <span class="date-span open">${e}<span class="arrow"></span></span>\n    </div>\n    <ul class="wrap-list box-news open" id="${e}"></ul>\n  </div>`;document.querySelector(".wrap-box").insertAdjacentHTML("afterbegin",t)}function l(){return(0,o.loadReadStorage)()[date].map((e=>{const{abstract:t,title:n,url:a,published_date:o,image_url:s,section:i,id:l}=e;o.split("-").reverse().join("/");return r(e)}))}!function(){const e=(0,o.loadReadStorage)(),t=Object.keys(e);for(date of t)0===e[date].length&&(delete e[date],localStorage.setItem("read",JSON.stringify(e)),location.reload()),i(date);for(date of Object.keys(e)){document.querySelector(`[data-date="${date}"]`);const e=document.getElementById(`${date}`),t=l();e.insertAdjacentHTML("beforeend",t.join(""))}}();document.querySelectorAll(".date-span").forEach((e=>{e.addEventListener("click",(function(){const t=this.parentElement.parentElement.querySelector("ul").id,n=document.getElementById(t);e.querySelector(".arrow").classList.toggle("arrow-bot"),n.classList.toggle("open")}))}));function d(){let e=(0,o.loadReadStorage)();return Object.values(e).flat()}document.querySelector(".wrap-box ").addEventListener("click",(function(e){if(e.target.closest("BUTTON")){const t=e.target.closest("BUTTON"),n=t.closest("li").dataset.id,a=t.querySelector(".box-news__favorite-p"),o=t.querySelector(".box-news__favorite-svg");console.log(a),t.classList.contains("favorite")?function(e,t,n,a){for(const o of d())if(o.id===t){return void((0,s.excludeFavoriteNew)(o.id)&&(console.log("Удалил"),e.classList.remove("favorite"),n.classList.remove("favorite-p"),a.classList.remove("favorite-svg"),n.textContent="Add to Favorite"))}}(t,n,a,o):function(e,t,n,a){for(const o of d())if(o.id===t){return void((0,s.includeFavoriteNew)(o)&&(console.log("Добавил"),e.classList.add("favorite"),n.classList.add("favorite-p"),a.classList.add("favorite-svg"),n.textContent="Remove from Favorite"))}}(t,n,a,o)}}));
//# sourceMappingURL=read-main.4819389c.js.map
