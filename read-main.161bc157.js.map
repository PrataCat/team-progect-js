{"mappings":"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","sources":["src/js/read-library.js","src/js/library.js","src/js/creatCardMarkup.js","src/js/read.js"],"sourcesContent":["export function loadReadStorage() {\n  try {\n    const storageRead = localStorage.getItem('read');\n    return storageRead === null ? {} : JSON.parse(storageRead);\n  } catch (error) {\n    console.log(error);\n  }\n}\n\nexport function writeReadStorage(object) {\n  removeFromReadStorage(object);\n  const readObj = loadReadStorage();\n  const currentDate = getCurrentDate();\n  if (!readObj[currentDate]) {\n    readObj[currentDate] = [];\n  }\n  readObj[currentDate].push(object);\n\n  localStorage.setItem('read', JSON.stringify(readObj));\n}\n\nexport function removeFromReadStorage(obj) {\n  const readObj = loadReadStorage();\n  for (key of Object.keys(readObj)) {\n    const indexInArray = readObj[key].findIndex(item => item.id === obj.id);\n    if (indexInArray > -1) {\n      console.log(readObj[key]);\n      readObj[key].splice(indexInArray, 1);\n    }\n  }\n  localStorage.setItem('read', JSON.stringify(readObj));\n}\n\n\nexport function getCurrentDate() {\n  return new Date().toLocaleString().slice(0, 10).split('.').join('/');\n}\n\n// Прописать вместо ф-ций loadReadStorage, writeReadStorage функции Леши,\n//  которые работают с БД вместо localStorage.\n// Делаем инастал библиотеки npm install firebase\n","const FAVORITE_STORAGE_KEY = 'Favorite';\n\nexport function includeFavoriteNew(theNew) {\n  try {\n    let curNewsArray = loadAllFavorites();\n    if (\n      typeof curNewsArray !== 'object' ||\n      Array.isArray(curNewsArray) === false\n    ) {\n      curNewsArray = [];\n      console.log(curNewsArray);\n    }\n\n    curNewsArray.unshift(theNew);\n    saveFavorites(curNewsArray);\n    return true;\n  } catch (error) {\n    console.error(error.message);\n    return false;\n  }\n}\n\nexport function excludeFavoriteNew(newId) {\n  try {\n    const curNewsArray = loadAllFavorites();\n    const foundIndex = curNewsArray.findIndex((elm, idx) => elm.id === newId);\n    curNewsArray.splice(foundIndex, 1);\n    saveFavorites(curNewsArray);\n    return true;\n  } catch (error) {\n    console.error(error.message);\n    return false;\n  }\n}\n\nexport function saveFavorites(arr) {\n  const msg = 'Wrong data to save: array with objects is expected.';\n  if (typeof arr !== 'object') {\n    console.log(msg);\n    return;\n  }\n  if (Array.isArray(arr) === false) {\n    console.log(msg);\n    return;\n  }\n  try {\n    const serializedState = JSON.stringify(arr);\n    localStorage.setItem(FAVORITE_STORAGE_KEY, serializedState);\n  } catch (error) {\n    console.error('Set state error: ', error.message);\n  }\n}\n\nexport function loadAllFavorites() {\n  try {\n    const serializedState = localStorage.getItem(FAVORITE_STORAGE_KEY);\n    return serializedState === null ? undefined : JSON.parse(serializedState);\n  } catch (error) {\n    console.error(error.message);\n  }\n}\n","import { loadAllFavorites } from './library';\nimport { loadReadStorage } from './read-library';\n\nfunction creatCardMarkup(el) {\n  const { abstract, title, url, published_date, image_url, section, id } = el;\n\n  const flags = checkRead(el);\n\n  return `<li class=\"box-news__item ${\n    flags.read ? 'show' : ''\n  }\" data-id=\"${id}\">\n      <p class=\"box-news__section\">${section}</p>\n          <div class=\"box-news___wrap-reading\">\n            <span class=\"box-news__reading\">Alredy read</span>\n            <svg class=\"icon\" width=\"18\" height=\"18\">\n              <use href=\"#icon-check\"></use>\n            </svg> \n          </div>\n          <button class=\"box-news__favorite-btn ${flags.fav ? 'favorite' : ''}\">\n              <p class=\"box-news__favorite-p\"> ${\n                flags.fav ? 'Remove from Favorite' : 'Add to Favorite'\n              }</p>\n              <svg class=\"box-news__favorite-svg\" width=\"16\" height=\"16\"\">\n                <use href=\"#icon-heart\"></use>\n              </svg>\n            </button>\n          <article>\n            <div class=\"box-news__thumb\">\n              <img class=\"box-news__img\" src=\"${image_url}\" loading=\"lazy\" alt=\"${section}\" width='440'/>\n            </div>\n          <div class=\"box-news__wrap-title\">\n            <h2 class=\"box-news__titel\">\n              ${title}\n            </h2>\n          </div>\n          <div class=\"box-news__wrap-text\">\n            <p class=\"box-news__text\">\n              ${\n                abstract.length > 120\n                  ? abstract.slice(0, 110) + '...'\n                  : abstract\n              }\n            </p>\n          </div>\n          <div class=\"box-news__wrap\">\n            <p class=\"box-news__data\">${published_date}</p>\n            <a href=\"${url}\" class=\"box-news__link\" target=\"_blank\" rel=\"noopener noreferrer nofollow\">Read more</a>\n          </div>\n          </article>\n          <div class=\"overlay\"></div>\n        </li>`;\n}\n\nexport { creatCardMarkup };\n\nfunction checkRead(obj) {\n  let arrFav = loadAllFavorites() || [];\n\n  let objRead = loadReadStorage() || {};\n  let arrRead = Object.values(objRead).flat();\n\n  const answer = arrFav.find(item => obj.id === item.id);\n\n  const reply = arrRead.find(i => obj.id === i.id);\n  let result = [];\n\n  return (result = {\n    fav: answer ? true : false,\n    read: reply ? true : false,\n  });\n}\n","//-------Maks & Serj--------------\nimport {\n  loadReadStorage,\n  removeFromReadStorage,\n  getCurrentDate,\n} from './read-library';\n\nimport { creatCardMarkup } from './creatCardMarkup';\nimport { includeFavoriteNew, excludeFavoriteNew } from './library';\n// import { onButtonFavorite } from './favorite-btn-action';\n\nlet noResultsText = 'The read news list is empty';\nconst footerEl = document.querySelector('.footer');\nconst headerEl = document.querySelector('.header');\nconst box = document.querySelector('.wrap-box ');\n\ncreateReadMarkup();\n\nfunction createReadMarkup() {\n  const readObj = loadReadStorage();\n  const keys = Object.keys(readObj);\n  const emptyreadObj = !Object.keys(readObj).length;\n\n  // Проверка, если пустой объект, то заглушка.\n  if (emptyreadObj) {\n    footerEl.classList.add('footer-margin');\n    headerEl.classList.add('header-margin');\n    renderNoNews(noResultsText);\n  } else {\n    for (const date of keys) {\n      // console.log(readObj[date]); // массивы объектов по датам\n      // Удаление пустого массива из Л.С.\n      if (readObj[date].length === 0) {\n        delete readObj[date];\n\n        localStorage.setItem('read', JSON.stringify(readObj));\n        location.reload();\n      }\n\n      createDateBox(date);\n    }\n\n    for (const date of Object.keys(readObj)) {\n      const box = document.querySelector(`[data-date=\"${date}\"]`);\n      const wrapList = document.getElementById(`${date}`);\n      const murkupForBox = createMurkupForBoxItem();\n\n      wrapList.insertAdjacentHTML('beforeend', murkupForBox.join(''));\n    }\n  }\n}\n\nfunction createDateBox(date) {\n  const wrapBox = document.querySelector('.wrap-box');\n  const murkup = `<div data-date=\"${date}\" class=\"dateList-wrap\">\n    <div class=\"span-wrap\">\n      <span class=\"date-span open\">${date}<span class=\"arrow\"></span></span>\n    </div>\n    <ul class=\"wrap-list box-news open\" id=\"${date}\"></ul>\n  </div>`;\n\n  const makeMurkup = wrapBox.insertAdjacentHTML('afterbegin', murkup);\n\n  return;\n}\n// Массив разметки.\nfunction createMurkupForBoxItem() {\n  const readObj = loadReadStorage();\n  const getKeyValue = readObj[date]; //массив из объектов\n\n  const createMurkup = getKeyValue.map(el => {\n    const { abstract, title, url, published_date, image_url, section, id } = el;\n    // const foto = media[0] ? media[0]['media-metadata'][2].url : '';\n    const data = published_date.split('-').reverse().join('/');\n\n    return creatCardMarkup(el);\n  });\n\n  return createMurkup;\n}\n\n// console.log(createMurkupForBoxItem());\n\nconst dateSpans = document.querySelectorAll('.date-span');\ndateSpans.forEach(dateSpan => {\n  dateSpan.addEventListener('click', function () {\n    // Отримати ідентифікатор 'id' елемента <ul> за допомогою атрибуту 'id'\n    const id = this.parentElement.parentElement.querySelector('ul').id;\n    // Отримати елемент <ul> а допомогою ідентифікатора 'id'\n    const list = document.getElementById(id);\n    const arrow = dateSpan.querySelector('.arrow');\n    arrow.classList.toggle('arrow-bot');\n    list.classList.toggle('open');\n    // Змінити стиль елемента <ul>, щоб його приховати або показати(без анімації)\n    // if (list.classList.contains('active')) {\n    //   list.classList.remove('active');\n    // } else {\n    //   list.classList.add('active');\n    // }\n  });\n});\n\n// console.log(box);\nbox.addEventListener('click', onButtonFavorite);\n\n// ----------------------------------------------------------\n// Без этих функций сердечки не проставляются на нашей странице\n// если массив посылать в favorite-btn-action, то он конфликтует с присланым массивом из news-list\n\nfunction onButtonFavorite(e) {\n  if (e.target.closest('BUTTON')) {\n    // кнопка\n    const favButton = e.target.closest('BUTTON');\n    // ацдишка li\n    const favId = favButton.closest('li').dataset.id;\n    // надпись на кнопке  Add to Favorite\n    const favP = favButton.querySelector('.box-news__favorite-p');\n    // svg\n    const favSvg = favButton.querySelector('.box-news__favorite-svg');\n    console.log(favP);\n\n    if (favButton.classList.contains('favorite')) {\n      offColorBtn(favButton, favId, favP, favSvg);\n    } else {\n      onColorBtn(favButton, favId, favP, favSvg);\n    }\n  }\n}\n\n// Массив объектов getArray\n\nfunction offColorBtn(favButton, favId, favP, favSvg) {\n  for (const el of getArray()) {\n    if (el.id === favId) {\n      const resultDel = excludeFavoriteNew(el.id);\n\n      // const resultDel = true;\n      if (resultDel) {\n        console.log('Удалил');\n        favButton.classList.remove('favorite');\n        favP.classList.remove('favorite-p');\n        favSvg.classList.remove('favorite-svg');\n        favP.textContent = 'Add to Favorite';\n      }\n      return;\n    }\n  }\n}\n\nfunction onColorBtn(favButton, favId, favP, favSvg) {\n  for (const el of getArray()) {\n    if (el.id === favId) {\n      const resultAdd = includeFavoriteNew(el);\n\n      // const resultAdd = true;\n      if (resultAdd) {\n        console.log('Добавил');\n        favButton.classList.add('favorite');\n        favP.classList.add('favorite-p');\n        favSvg.classList.add('favorite-svg');\n        favP.textContent = 'Remove from Favorite';\n      }\n      return;\n    }\n  }\n}\n\n// Рзглаживаем вложенные массивы из нашего Л.С. в плоский массив.\nfunction getArray() {\n  let objRead = loadReadStorage();\n  let arrRead = Object.values(objRead).flat();\n\n  return arrRead;\n}\n\n// Функция для вызова заглушки\nfunction renderNoNews(noResultsText) {\n  const noNewsMarkUp = `<div class=\"no-results-wrap\"><p class=\"no-results-text\">${noResultsText}</p><span class=\"no-results-bgr\"></span></div>`;\n  box.innerHTML = noNewsMarkUp;\n}\n"],"names":["$7c776d4421e955ca$export$fcf14f7a08ef2738","storageRead","localStorage","getItem","JSON","parse","error","console","log","$93effc6fc56091ad$var$FAVORITE_STORAGE_KEY","$93effc6fc56091ad$export$d1d03fba418fb01d","theNew","curNewsArray","$93effc6fc56091ad$export$c5cd7ad466e0200e","Array","isArray","unshift","$93effc6fc56091ad$export$ff4b822c9af62a71","message","$93effc6fc56091ad$export$c91e3aec03b75cd3","newId","foundIndex","findIndex","elm","idx","id","splice","arr","msg","serializedState","stringify","setItem","undefined","$d95d1fc007beb27b$export$c2172e452593faf6","el","obj","arrFav","objRead","arrRead","answer","reply","abstract","title","url","published_date","image_url","section","flags","Object","values","flat","find","item","i","fav","read","concat","length","slice","$95b4463fc8ac9448$var$footerEl","document","querySelector","$95b4463fc8ac9448$var$headerEl","$95b4463fc8ac9448$var$box","$95b4463fc8ac9448$var$createDateBox","date","wrapBox","murkup","insertAdjacentHTML","$95b4463fc8ac9448$var$createMurkupForBoxItem","map","split","reverse","join","$95b4463fc8ac9448$var$getArray","readObj","keys","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator","Symbol","iterator","next","done","value","location","reload","err","return","_iteratorNormalCompletion1","_didIteratorError1","_iteratorError1","_step1","_iterator1","date1","wrapList","getElementById","murkupForBox","err1","classList","add","noNewsMarkUp","innerHTML","$95b4463fc8ac9448$var$createReadMarkup","querySelectorAll","forEach","dateSpan","addEventListener","this","parentElement","list","toggle","e","target","closest","favButton","favId","dataset","favP","favSvg","contains","remove","textContent","$95b4463fc8ac9448$var$offColorBtn","$95b4463fc8ac9448$var$onColorBtn"],"version":3,"file":"read-main.161bc157.js.map"}