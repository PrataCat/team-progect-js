function e(e){return new Date(e).toLocaleString().slice(0,10).split(".").join("/")}function t(e){const{abstract:t,title:n,url:o,published_date:s,image_url:i,section:r,id:a}=e;return`<li class="box-news__item" data-id="${a}">\n      <p class="box-news__section">${r}</p>\n          <div class="box-news___wrap-reading">\n            <span class="box-news__reading">Alredy read</span>\n            <svg class="icon" width="18" height="18">\n              <use href="#icon-check"></use>\n            </svg> \n          </div>\n          <button id="favorite-btn" class="box-news__favorite-btn">\n              <p id="favorite-p" class="box-news__favorite-p">Add to Favorite</p>\n              <svg class="box-news__favorite-svg" width="16" height="16" id="favorite-svg">\n                <use href="#icon-heart"></use>\n              </svg>\n            </button>\n          <article>\n            <div class="box-news__thumb">\n              <img class="box-news__img" src="${i}" loading="lazy" alt="${r}" width='440'/>\n            </div>\n          <div class="box-news__wrap-title">\n            <h2 class="box-news__titel">\n              ${n}\n            </h2>\n          </div>\n          <div class="box-news__wrap-text">\n            <p class="box-news__text">\n              ${t.length>120?t.slice(0,110)+"...":t}\n            </p>\n          </div>\n          <div class="box-news__wrap">\n            <p class="box-news__data">${s}</p>\n            <a href="${o}" class="box-news__link" target="_blank" rel="noopener noreferrer nofollow">Read more</a>\n          </div>\n          </article>\n          <div class="overlay"></div>\n        </li>`}function n(e){console.log(e);try{let t=i();return"object"==typeof t&&!1!==Array.isArray(t)||(t=[],console.log(t)),t.unshift(e),s(t),!0}catch(e){return console.error(e.message),!1}}function o(e){try{const t=i(),n=t.findIndex(((t,n)=>t.id===e));return t.splice(n,1),s(t),!0}catch(e){return console.error(e.message),!1}}function s(e){const t="Wrong data to save: array with objects is expected.";if("object"==typeof e)if(!1!==Array.isArray(e))try{const t=JSON.stringify(e);localStorage.setItem("Favorite",t)}catch(e){console.error("Set state error: ",e.message)}else console.log(t);else console.log(t)}function i(){try{const e=localStorage.getItem("Favorite");return null===e?void 0:JSON.parse(e)}catch(e){console.error(e.message)}}const r=document.querySelector(".box-news");r.addEventListener("click",(function(e){if(e.target.closest("BUTTON")){const t=e.target.closest("BUTTON"),s=t.closest("li").dataset.id,i=t.querySelector(".box-news__favorite-p"),r=t.querySelector(".box-news__favorite-svg");t.classList.contains("favorite")?function(e,t,n,s){for(const i of d())if(i.id===t){return void(o(i.id)&&(console.log("Удалил"),e.classList.remove("favorite"),n.classList.remove("favorite-p"),s.classList.remove("favorite-svg"),n.textContent="Add to Favorite"))}}(t,s,i,r):function(e,t,o,s){for(const i of d())if(i.id===t){return void(n(i)&&(console.log("Добавил"),e.classList.add("favorite"),o.classList.add("favorite-p"),s.classList.add("favorite-svg"),o.textContent="Remove from Favorite"))}}(t,s,i,r)}})),r.addEventListener("click",(function(e){if(e.preventDefault(),"A"===e.target.tagName){let t=e.target.closest("li").dataset.id,n=e.target.closest("li");for(const e of a){if(console.log("el - ",e),e.id===t)return console.log("Мы нашли ID и вызываем ф-цию READ (include...)"),void n.classList.add("show");console.log("Вышли из функции когда отправили данные")}}}));let a=[],c=null;async function l(e){0===a.length&&(a=await e()),c=function(){const e=void 0;return e>1280?8:e>768?7:4}();const n=function(e,t,n){const o=(t-1)*n,s=o+n;return e.slice(o,s)}(a,1,c);let o=n.map((e=>t(e)));var s;s=o,r.insertAdjacentHTML("beforeend",s.join(""))}function d(){return a}window.addEventListener("resize",(function(){0})),l((async function(t=7){try{const n=await async function(e=7){try{if(![1,7,30].includes(e))return void console.log("incorrect period");const t=await fetch(`https://api.nytimes.com/svc/mostpopular/v2/viewed/${e}.json?api-key=xiA2oqSwY7oUdkxynOuoZzJzlQ7EJz4s`);return(await t.json()).results}catch(e){console.log(e)}}(t);return n.map((t=>{const{title:n,abstract:o,published_date:s,url:i,section:r,media:a,uri:c}=t,l=a[0]?a[0]["media-metadata"][2].url:"";return{title:n,abstract:o,published_date:e(s),url:i,section:r,image_url:l,id:c.split("/")[3]}}))}catch(e){console.log(e)}}));
//# sourceMappingURL=index.ca9b3c45.js.map
