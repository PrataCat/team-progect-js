{"mappings":"oeACA,IAAAA,EAAAC,EAAA,SAGA,IAAIC,EAAkB,GAClBC,EAAmBC,OAAOC,WAC9B,MAAMC,EAAmBC,SAASC,cAAc,+BAC1CC,EAAqBF,SAASC,cAClC,iCAEIE,EAAwBH,SAASC,cACrC,gCA8BF,SAASG,EAAiBC,EAAiBC,GACzC,IAAIC,EAAyB,EACzBC,EAAmB,GACnBF,GAAoB,MACtBC,EAAyB,EACzBC,EAAmB,UACVF,EAAmB,KAAOA,EAAmB,MACtDC,EAAyB,EACzBC,EAAmB,UACVF,GAAoB,MAC7BC,EAAyB,EACzBC,EAAmB,cASvB,SACEC,EACAF,EACAC,GAEA,IAAIE,EAA4B,GAC5BC,EAA8B,GAClCF,EAAgBG,KAAI,EAACC,aAAEA,GAAgBC,KACjCA,EAAQP,EACVG,GAA6B,oFAAoFG,oBAGnHF,GAA+B,wFAAwFE,iBAA4B,IAErJd,EAAiBgB,UAAYL,EAC7BX,EAAiBiB,mBACf,YACA,gGAAgGR,8IAGlGN,EAAmBa,UAAYJ,C,CA3B/BM,CACEZ,EACAE,EACAC,E,CAoEJ,SAASU,EAAwBC,IAE7BjB,EAAmBkB,UAAUC,SAAS,YACrCF,EAAMG,OAAOF,UAAUC,SAAS,iCAChCF,EAAMG,OAAOF,UAAUC,SAAS,kCAEjCnB,EAAmBkB,UAAUG,OAAO,WACpCpB,EAAsBiB,UAAUG,OAAO,WACvC1B,OAAO2B,oBAAoB,QAASN,G,CApG/BO,MAAM,0GAAgBC,MAAKC,IAChC,IAAKA,EAAIC,GACP,MAAM,IAAIC,MAAM,SAElB,OAAOF,EAAIG,MAAM,IAdhBJ,MAAK,EAACK,QAAEA,MACPpC,EAAkBoC,EAClB3B,EAAiBT,EAAiBC,EAAiB,IAEpDoC,OAAMC,IACLC,QAAQC,IAAIF,EAAM,IAZxBlC,EAAiBqC,iBAAiB,SAoElC,SAA0BjB,IAQ1B,SAA2BA,GACzB,MAAMkB,EAAmBrC,SAASsC,iBAChC,8BAEF,IAAK,MAAMC,KAAeF,EACpBE,EAAYnB,UAAUC,SAAS,WACjCkB,EAAYnB,UAAUG,OAAO,UAGF,WAA3BJ,EAAMG,OAAOkB,WACfrB,EAAMG,OAAOF,UAAUqB,IAAI,S,CAjB7BC,CAAkBvB,GACKA,EAAMG,OAAOqB,S,IArEtC5C,EAAiBqC,iBAAiB,SAyFlC,SAAgCjB,GAC1BA,EAAMG,OAAOF,UAAUC,SAAS,gBAClCF,EAAMyB,kBACN1C,EAAmBkB,UAAUyB,OAAO,WACpC1C,EAAsBiB,UAAUyB,OAAO,WACvChD,OAAOuC,iBAAiB,QAASlB,G,IA7FrChB,EAAmBkC,iBAAiB,SAiGpC,SAA4BU,GAC1B,GAA2B,WAAvBA,EAAExB,OAAOkB,UAAwB,CACnC,IAAIO,EAAUD,EAAExB,OAAO0B,YACvB,MAAMC,EAAWlD,EAAiBmD,UACjBD,EAASE,WACjBH,YAAcD,C,KArG3BlD,OAAOuC,iBAAiB,SAAU3C,GAsHlC,YACMI,OAAOC,YAAc,MAAQF,EAAmB,MAIlDC,OAAOC,WAAa,KACpBD,OAAOC,WAAa,OACnBF,GAAoB,KAAOA,GAAoB,OAIvCC,OAAOC,YAAc,KAAOF,EAAmB,OATxDA,EAAmBC,OAAOC,WAC1BM,EAAiBT,EAAiBC,G,GAzHiB","sources":["src/js/topic-list.js"],"sourcesContent":["// ------------Misa & Stas--------------\nconst debounce = require('lodash.debounce');\nconst KEY = '?api-key=OotKL5nYMsbXFbPHNmmUjf7brVnGZQ8G';\nconst URL = 'https://api.nytimes.com/svc/news/v3/content/section-list.json';\nlet categoriesArray = [];\nlet windowInnerWidth = window.innerWidth;\nconst mainCategoryList = document.querySelector('.filter__main-category-list');\nconst othersCategoryList = document.querySelector(\n  '.filter__others-category-list'\n);\nconst othersCategoryLisWrap = document.querySelector(\n  '.filter__other-category-wrap'\n);\n\nonFetch();\n\nmainCategoryList.addEventListener('click', onChooseCategory);\nmainCategoryList.addEventListener('click', onShowOthersCategories);\nothersCategoryList.addEventListener('click', onSectionSelection);\nwindow.addEventListener('resize', debounce(onReRender, 50));\n\nfunction onFetch() {\n  onFetchCategories()\n    .then(({ results }) => {\n      categoriesArray = results;\n      createCategories(categoriesArray, windowInnerWidth);\n    })\n    .catch(error => {\n      console.log(error);\n    });\n}\n\nfunction onFetchCategories() {\n  return fetch(`${URL}${KEY}`).then(res => {\n    if (!res.ok) {\n      throw new Error('error');\n    }\n    return res.json();\n  });\n}\n\nfunction createCategories(categoriesArray, windowInnerWidth) {\n  let amountOfMainCategories = 0;\n  let nameForOthersBtn = '';\n  if (windowInnerWidth >= 1280) {\n    amountOfMainCategories = 6;\n    nameForOthersBtn = 'Others';\n  } else if (windowInnerWidth > 767 && windowInnerWidth < 1280) {\n    amountOfMainCategories = 4;\n    nameForOthersBtn = 'Others';\n  } else if (windowInnerWidth <= 767) {\n    amountOfMainCategories = 0;\n    nameForOthersBtn = 'Categories';\n  }\n  createMarkupForCategories(\n    categoriesArray,\n    amountOfMainCategories,\n    nameForOthersBtn\n  );\n}\n\nfunction createMarkupForCategories(\n  categoriesArray,\n  amountOfMainCategories,\n  nameForOthersBtn\n) {\n  let markupForMainCategoryList = '';\n  let markupForOthersCategoryList = '';\n  categoriesArray.map(({ display_name }, index) => {\n    if (index < amountOfMainCategories) {\n      markupForMainCategoryList += `<li class=\"filter__main-category-item\"><button class=\"filter__main-category-btn\">${display_name}  </button></li>`;\n      return;\n    }\n    markupForOthersCategoryList += `<li class=\"filter__others-category-item\"><button class=\"filter__others-category-btn\">${display_name}</button></li>`;\n  });\n  mainCategoryList.innerHTML = markupForMainCategoryList;\n  mainCategoryList.insertAdjacentHTML(\n    'beforeend',\n    `<li class=\"filter__other-category-item\"><button class=\"filter__main-category-btn others-btn\">${nameForOthersBtn}<svg class=\"filter__main-category-btn-icon\"> <use href=\"../images/symbol-defs-mini.svg#icon-orig-mini-n-z\"> </use> </svg>\n</button></li>`\n  );\n  othersCategoryList.innerHTML = markupForOthersCategoryList;\n}\n\nfunction onChooseCategory(event) {\n  toMarkCategoryBtn(event);\n  const nameOfCategory = event.target.outerText;\n  if (!(nameOfCategory === 'Others') && !(nameOfCategory === 'Categories')) {\n    // console.log(nameOfCategory);\n  }\n}\n\nfunction toMarkCategoryBtn(event) {\n  const categoryBtnArray = document.querySelectorAll(\n    '.filter__main-category-btn'\n  );\n  for (const categoryBtn of categoryBtnArray) {\n    if (categoryBtn.classList.contains('active')) {\n      categoryBtn.classList.remove('active');\n    }\n  }\n  if (event.target.localName === 'button') {\n    event.target.classList.add('active');\n  }\n}\n\nfunction onShowOthersCategories(event) {\n  if (event.target.classList.contains('others-btn')) {\n    event.stopPropagation();\n    othersCategoryList.classList.toggle('visible');\n    othersCategoryLisWrap.classList.toggle('visible');\n    window.addEventListener('click', onCloseOthersCategories);\n  }\n}\n\nfunction onSectionSelection(e) {\n  if (e.target.localName === 'button') {\n    let section = e.target.textContent;\n    const othersLi = mainCategoryList.lastChild;\n    const otherBtn = othersLi.firstChild;\n    otherBtn.textContent = section;\n    // console.log(e.target.textContent);\n  }\n}\n\nfunction onCloseOthersCategories(event) {\n  if (\n    othersCategoryList.classList.contains('visible') &&\n    !event.target.classList.contains('filter__others-category-item') &&\n    !event.target.classList.contains('filter__others-category-list')\n  ) {\n    othersCategoryList.classList.remove('visible');\n    othersCategoryLisWrap.classList.remove('visible');\n    window.removeEventListener('click', onCloseOthersCategories);\n  }\n}\n\nfunction onReRender() {\n  if (window.innerWidth >= 1280 && windowInnerWidth < 1280) {\n    windowInnerWidth = window.innerWidth;\n    createCategories(categoriesArray, windowInnerWidth);\n  } else if (\n    window.innerWidth > 767 &&\n    window.innerWidth < 1280 &&\n    (windowInnerWidth <= 767 || windowInnerWidth >= 1280)\n  ) {\n    windowInnerWidth = window.innerWidth;\n    createCategories(categoriesArray, windowInnerWidth);\n  } else if (window.innerWidth <= 767 && windowInnerWidth > 767) {\n    windowInnerWidth = window.innerWidth;\n    createCategories(categoriesArray, windowInnerWidth);\n  }\n}\n"],"names":["$50Kfe","parcelRequire","$c085cd090bcbc99e$var$categoriesArray","$c085cd090bcbc99e$var$windowInnerWidth","window","innerWidth","$c085cd090bcbc99e$var$mainCategoryList","document","querySelector","$c085cd090bcbc99e$var$othersCategoryList","$c085cd090bcbc99e$var$othersCategoryLisWrap","$c085cd090bcbc99e$var$createCategories","categoriesArray1","windowInnerWidth1","amountOfMainCategories","nameForOthersBtn","categoriesArray2","markupForMainCategoryList","markupForOthersCategoryList","map","display_name","index","innerHTML","insertAdjacentHTML","$c085cd090bcbc99e$var$createMarkupForCategories","$c085cd090bcbc99e$var$onCloseOthersCategories","event","classList","contains","target","remove","removeEventListener","fetch","then","res","ok","Error","json","results","catch","error","console","log","addEventListener","categoryBtnArray","querySelectorAll","categoryBtn","localName","add","$c085cd090bcbc99e$var$toMarkCategoryBtn","outerText","stopPropagation","toggle","e","section","textContent","othersLi","lastChild","firstChild"],"version":3,"file":"index.0fb37337.js.map"}