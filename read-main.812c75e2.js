function e(){try{const e=localStorage.getItem("read");return null===e?{}:JSON.parse(e)}catch(e){console.log(e)}}function t(e){try{let t=o();return"object"==typeof t&&!1!==Array.isArray(t)||(t=[],console.log(t)),t.unshift(e),n(t),!0}catch(e){return console.error(e.message),!1}}function s(e){try{const t=o(),s=t.findIndex(((t,s)=>t.id===e));return t.splice(s,1),n(t),!0}catch(e){return console.error(e.message),!1}}function n(e){const t="Wrong data to save: array with objects is expected.";if("object"==typeof e)if(!1!==Array.isArray(e))try{const t=JSON.stringify(e);localStorage.setItem("Favorite",t)}catch(e){console.error("Set state error: ",e.message)}else console.log(t);else console.log(t)}function o(){try{const e=localStorage.getItem("Favorite");return null===e?void 0:JSON.parse(e)}catch(e){console.error(e.message)}}function r(t){const{abstract:s,title:n,url:r,published_date:a,image_url:i,section:c,id:l}=t,d=function(t){let s=o()||[],n=e()||{},r=Object.values(n).flat();const a=s.find((e=>t.id===e.id)),i=r.find((e=>t.id===e.id));return{fav:!!a,read:!!i}}(t);return`<li class="box-news__item ${d.read?"show":""}" data-id="${l}">\n      <p class="box-news__section">${c}</p>\n          <div class="box-news___wrap-reading">\n            <span class="box-news__reading">Alredy read</span>\n            <svg class="icon" width="18" height="18">\n              <use href="#icon-check"></use>\n            </svg> \n          </div>\n          <button class="box-news__favorite-btn ${d.fav?"favorite":""}">\n              <p class="box-news__favorite-p"> ${d.fav?"Remove from Favorite":"Add to Favorite"}</p>\n              <svg class="box-news__favorite-svg" width="16" height="16"">\n                <use href="#icon-heart"></use>\n              </svg>\n            </button>\n          <article>\n            <div class="box-news__thumb">\n              <img class="box-news__img" src="${i}" loading="lazy" alt="${c}" width='440'/>\n            </div>\n          <div class="box-news__wrap-title">\n            <h2 class="box-news__titel">\n              ${n}\n            </h2>\n          </div>\n          <div class="box-news__wrap-text">\n            <p class="box-news__text">\n              ${s.length>120?s.slice(0,110)+"...":s}\n            </p>\n          </div>\n          <div class="box-news__wrap">\n            <p class="box-news__data">${a}</p>\n            <a href="${r}" class="box-news__link" target="_blank" rel="noopener noreferrer nofollow">Read more</a>\n          </div>\n          </article>\n          <div class="overlay"></div>\n        </li>`}const a=document.querySelector(".footer"),i=document.querySelector(".header"),c=document.querySelector(".wrap-box ");function l(e){const t=`<div data-date="${e}" class="dateList-wrap">\n    <div class="span-wrap">\n      <span class="date-span open">${e}<span class="arrow"></span></span>\n    </div>\n    <ul class="wrap-list box-news open" id="${e}"></ul>\n  </div>`;document.querySelector(".wrap-box").insertAdjacentHTML("afterbegin",t)}function d(){return e()[date].map((e=>{const{abstract:t,title:s,url:n,published_date:o,image_url:a,section:i,id:c}=e;o.split("-").reverse().join("/");return r(e)}))}!function(){const t=e(),s=Object.keys(t);if(Object.keys(t).length){for(const e of s)0===t[e].length&&(delete t[e],localStorage.setItem("read",JSON.stringify(t)),location.reload()),l(e);for(const e of Object.keys(t)){document.querySelector(`[data-date="${e}"]`);const t=document.getElementById(`${e}`),s=d();t.insertAdjacentHTML("beforeend",s.join(""))}}else a.classList.add("footer-margin"),i.classList.add("header-margin"),function(e){const t=`<div class="no-results-wrap"><p class="no-results-text">${e}</p><span class="no-results-bgr"></span></div>`;c.innerHTML=t}("The read news list is empty")}();function u(){let t=e();return Object.values(t).flat()}document.querySelectorAll(".date-span").forEach((e=>{e.addEventListener("click",(function(){const t=this.parentElement.parentElement.querySelector("ul").id,s=document.getElementById(t);e.querySelector(".arrow").classList.toggle("arrow-bot"),s.classList.toggle("open")}))})),c.addEventListener("click",(function(e){if(e.target.closest("BUTTON")){const n=e.target.closest("BUTTON"),o=n.closest("li").dataset.id,r=n.querySelector(".box-news__favorite-p"),a=n.querySelector(".box-news__favorite-svg");console.log(r),n.classList.contains("favorite")?function(e,t,n,o){for(const r of u())if(r.id===t){return void(s(r.id)&&(console.log("Удалил"),e.classList.remove("favorite"),n.classList.remove("favorite-p"),o.classList.remove("favorite-svg"),n.textContent="Add to Favorite"))}}(n,o,r,a):function(e,s,n,o){for(const r of u())if(r.id===s){return void(t(r)&&(console.log("Добавил"),e.classList.add("favorite"),n.classList.add("favorite-p"),o.classList.add("favorite-svg"),n.textContent="Remove from Favorite"))}}(n,o,r,a)}}));
//# sourceMappingURL=read-main.812c75e2.js.map
