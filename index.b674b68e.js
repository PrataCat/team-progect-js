var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},t={},o={},n=e.parcelRequire6b37;null==n&&((n=function(e){if(e in t)return t[e].exports;if(e in o){var n=o[e];delete o[e];var r={id:e,exports:{}};return t[e]=r,n.call(r.exports,r,r.exports),r.exports}var i=new Error("Cannot find module '"+e+"'");throw i.code="MODULE_NOT_FOUND",i}).register=function(e,t){o[e]=t},e.parcelRequire6b37=n);var r=n("f2q8M"),i=n("lAcMk");function s(e){try{let t=l();return"object"==typeof t&&!1!==Array.isArray(t)||(t=[],console.log(t)),t.unshift(e),a(t),!0}catch(e){return console.error(e.message),!1}}function c(e){try{const t=l(),o=t.findIndex(((t,o)=>t.id===e));return t.splice(o,1),a(t),!0}catch(e){return console.error(e.message),!1}}function a(e){const t="Wrong data to save: array with objects is expected.";if("object"==typeof e)if(!1!==Array.isArray(e))try{const t=JSON.stringify(e);localStorage.setItem("Favorite",t)}catch(e){console.error("Set state error: ",e.message)}else console.log(t);else console.log(t)}function l(){try{const e=localStorage.getItem("Favorite");return null===e?void 0:JSON.parse(e)}catch(e){console.error(e.message)}}function f(){try{const e=localStorage.getItem("read");return null===e?{}:JSON.parse(e)}catch(e){console.log(e)}}function d(e){!function(e){const t=f();for(key of Object.keys(t)){const o=t[key].findIndex((t=>t.id===e.id));o>-1&&(console.log(t[key]),t[key].splice(o,1))}localStorage.setItem("read",JSON.stringify(t))}(e);const t=f(),o=(new Date).toLocaleString().slice(0,10).split(".").join("/");t[o]||(t[o]=[]),t[o].push(e),localStorage.setItem("read",JSON.stringify(t))}async function u(){let e=b(),t=l(),o=f(),n=Object.values(o).flat();return e.map((e=>{if(t){if(t.some((t=>e.id===t.id))&&(e.favor=!0),n){return void(n.some((t=>e.id===t.id))&&(e.read=!0))}}else if(n){n.some((t=>e.id===t.id))&&(e.read=!0)}})),e}const g=document.querySelector(".box-news");g.addEventListener("click",(function(e){if(e.target.closest("BUTTON")){const t=e.target.closest("BUTTON"),o=t.closest("li").dataset.id,n=t.querySelector(".box-news__favorite-p");t.querySelector(".box-news__favorite-svg");t.classList.contains("favorite")?function(e,t,o){for(const n of b())if(n.id===t){return void(c(n.id)&&(e.classList.remove("favorite"),o.textContent="Add to Favorite"))}}(t,o,n):function(e,t,o){for(const n of b())if(n.id===t){return void(s(n)&&(e.classList.add("favorite"),o.textContent="Remove from Favorite"))}}(t,o,n)}})),g.addEventListener("click",(function(e){if(e.preventDefault(),"A"===e.target.tagName){let t=e.target.closest("li").dataset.id,o=e.target.closest("li");for(const e of b())if(e.id===t)return d(e),void o.classList.add("show")}}));let v=w(),y=[],p=null;async function m(e){0===y.length&&(y=await e()),p=function(){const e=w();return e>1280?8:e>768?7:4}();!function(e,t,o){const n=(t-1)*o,r=n+o;e.slice(n,r)}(y,1,p);let t=(await u()).map((e=>(0,i.creatCardMarkup)(e)));var o;o=t,g.innnerHTML="",g.insertAdjacentHTML("beforeend",o.join(""))}function w(){return document.documentElement.clientWidth}function b(){return y}window.addEventListener("resize",(function(){(v<768&&w()>=768||v>=768&&v<1280&&(w()<768||w()>=1280)||v>=1280&&w()<1280)&&m()})),m(r.getMostPopularArticles);
//# sourceMappingURL=index.b674b68e.js.map
