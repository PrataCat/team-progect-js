!function(){function e(){try{var e=localStorage.getItem("read");return null===e?{}:JSON.parse(e)}catch(e){console.log(e)}}var t="Favorite";function n(e){try{var t=o();return"object"==typeof t&&!1!==Array.isArray(t)||(t=[],console.log(t)),t.unshift(e),a(t),!0}catch(e){return console.error(e.message),!1}}function r(e){try{var t=o(),n=t.findIndex((function(t,n){return t.id===e}));return t.splice(n,1),a(t),!0}catch(e){return console.error(e.message),!1}}function a(e){var n="Wrong data to save: array with objects is expected.";if("object"==typeof e)if(!1!==Array.isArray(e))try{var r=JSON.stringify(e);localStorage.setItem(t,r)}catch(e){console.error("Set state error: ",e.message)}else console.log(n);else console.log(n)}function o(){try{var e=localStorage.getItem(t);return null===e?void 0:JSON.parse(e)}catch(e){console.error(e.message)}}function s(t){var n,r,a,s,c,i,l=t.abstract,d=t.title,v=t.url,u=t.published_date,f=t.image_url,g=t.section,y=t.id,p=(n=t,r=o()||[],a=e()||{},s=Object.values(a).flat(),c=r.find((function(e){return n.id===e.id})),i=s.find((function(e){return n.id===e.id})),{fav:!!c,read:!!i});return'<li class="box-news__item '.concat(p.read?"show":"",'" data-id="').concat(y,'">\n      <p class="box-news__section">').concat(g,'</p>\n          <div class="box-news___wrap-reading">\n            <span class="box-news__reading">Alredy read</span>\n            <svg class="icon" width="18" height="18">\n              <use href="#icon-check"></use>\n            </svg> \n          </div>\n          <button class="box-news__favorite-btn ').concat(p.fav?"favorite":"",'">\n              <p class="box-news__favorite-p"> ').concat(p.fav?"Remove from Favorite":"Add to Favorite",'</p>\n              <svg class="box-news__favorite-svg" width="16" height="16"">\n                <use href="#icon-heart"></use>\n              </svg>\n            </button>\n          <article>\n            <div class="box-news__thumb">\n              <img class="box-news__img" src="').concat(f,'" loading="lazy" alt="').concat(g,'" width=\'440\'/>\n            </div>\n          <div class="box-news__wrap-title">\n            <h2 class="box-news__titel">\n              ').concat(d,'\n            </h2>\n          </div>\n          <div class="box-news__wrap-text">\n            <p class="box-news__text">\n              ').concat(l.length>120?l.slice(0,110)+"...":l,'\n            </p>\n          </div>\n          <div class="box-news__wrap">\n            <p class="box-news__data">').concat(u,'</p>\n            <a href="').concat(v,'" class="box-news__link" target="_blank" rel="noopener noreferrer nofollow">Read more</a>\n          </div>\n          </article>\n          <div class="overlay"></div>\n        </li>')}var c=document.querySelector(".footer"),i=document.querySelector(".header"),l=document.querySelector(".wrap-box ");function d(e){var t=document.querySelector(".wrap-box"),n='<div data-date="'.concat(e,'" class="dateList-wrap">\n    <div class="span-wrap">\n      <span class="date-span open">').concat(e,'<span class="arrow"></span></span>\n    </div>\n    <ul class="wrap-list box-news open" id="').concat(e,'"></ul>\n  </div>');t.insertAdjacentHTML("afterbegin",n)}function v(t){return e()[t].map((function(e){e.abstract,e.title,e.url;var t=e.published_date;e.image_url,e.section,e.id,t.split("-").reverse().join("/");return s(e)}))}function u(){var t=e();return Object.values(t).flat()}!function(){var t=e(),n=Object.keys(t);if(Object.keys(t).length){var r=!0,a=!1,o=void 0;try{for(var s,u=n[Symbol.iterator]();!(r=(s=u.next()).done);r=!0){var f=s.value;0===t[f].length&&(delete t[f],localStorage.setItem("read",JSON.stringify(t)),location.reload()),d(f)}}catch(e){a=!0,o=e}finally{try{r||null==u.return||u.return()}finally{if(a)throw o}}var g=!0,y=!1,p=void 0;try{for(var b,w=Object.keys(t)[Symbol.iterator]();!(g=(b=w.next()).done);g=!0){var m=b.value,_=(document.querySelector('[data-date="'.concat(m,'"]')),document.getElementById("".concat(m))),h=v(m);_.insertAdjacentHTML("beforeend",h.join(""))}}catch(e){y=!0,p=e}finally{try{g||null==w.return||w.return()}finally{if(y)throw p}}}else c.classList.add("footer-margin"),i.classList.add("header-margin"),x='<div class="no-results-wrap"><p class="no-results-text">'.concat("The read news list is empty",'</p><span class="no-results-bgr"></span></div>'),l.innerHTML=x;var x}(),document.querySelectorAll(".date-span").forEach((function(e){e.addEventListener("click",(function(){var t=this.parentElement.parentElement.querySelector("ul").id,n=document.getElementById(t);e.querySelector(".arrow").classList.toggle("arrow-bot"),n.classList.toggle("open")}))})),l.addEventListener("click",(function(e){if(e.target.closest("BUTTON")){var t=e.target.closest("BUTTON"),a=t.closest("li").dataset.id,o=t.querySelector(".box-news__favorite-p"),s=t.querySelector(".box-news__favorite-svg");console.log(o),t.classList.contains("favorite")?function(e,t,n,a){var o=!0,s=!1,c=void 0;try{for(var i,l=u()[Symbol.iterator]();!(o=(i=l.next()).done);o=!0){var d=i.value;if(d.id===t)return void(r(d.id)&&(console.log("Удалил"),e.classList.remove("favorite"),n.classList.remove("favorite-p"),a.classList.remove("favorite-svg"),n.textContent="Add to Favorite"))}}catch(e){s=!0,c=e}finally{try{o||null==l.return||l.return()}finally{if(s)throw c}}}(t,a,o,s):function(e,t,r,a){var o=!0,s=!1,c=void 0;try{for(var i,l=u()[Symbol.iterator]();!(o=(i=l.next()).done);o=!0){var d=i.value;if(d.id===t)return void(n(d)&&(console.log("Добавил"),e.classList.add("favorite"),r.classList.add("favorite-p"),a.classList.add("favorite-svg"),r.textContent="Remove from Favorite"))}}catch(e){s=!0,c=e}finally{try{o||null==l.return||l.return()}finally{if(s)throw c}}}(t,a,o,s)}}))}();
//# sourceMappingURL=read-main.b6f17f05.js.map
