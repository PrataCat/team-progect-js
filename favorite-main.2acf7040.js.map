{"mappings":"YAAA,IAAMA,EAAuB,WAuBtB,SAASC,EAAmBC,GACjC,IACE,IAAMC,EAAeC,IACfC,EAAaF,EAAaG,WAAU,SAACC,EAAKC,G,OAAQD,EAAIE,KAAOP,C,IAGnE,OAFAC,EAAaO,OAAOL,EAAY,GAChCM,EAAcR,IACP,C,CACP,MAAOS,GAEP,OADAC,QAAQD,MAAMA,EAAME,UACb,C,EAIJ,SAASH,EAAcI,GAC5B,IAAMC,EAAM,sDACZ,GAAmB,iBAARD,EAIX,IAA2B,IAAvBE,MAAMC,QAAQH,GAIlB,IACE,IAAMI,EAAkBC,KAAKC,UAAUN,GACvCO,aAAaC,QAAQvB,EAAsBmB,E,CAC3C,MAAOP,GACPC,QAAQD,MAAM,oBAAqBA,EAAME,Q,MAPzCD,QAAQW,IAAIR,QAJZH,QAAQW,IAAIR,E,CAeT,SAASZ,IACd,IACE,IAAMe,EAAkBG,aAAaG,QAAQzB,GAC7C,OAA2B,OAApBmB,OAA2BO,EAAYN,KAAKO,MAAMR,E,CACzD,MAAOP,GACPC,QAAQD,MAAMA,EAAME,Q,EC3DxB,SAASc,EAAgBC,GACvB,IAAQC,EAAiED,EAAjEC,SAAUC,EAAuDF,EAAvDE,MAAOC,EAAgDH,EAAhDG,IAAKC,EAA2CJ,EAA3CI,eAAgBC,EAA2BL,EAA3BK,UAAWC,EAAgBN,EAAhBM,QAAS1B,EAAOoB,EAAPpB,GAElE,MAAO,uCAC4B2B,OADW3B,EAAG,2CAgBH2B,OAfXD,EAAQ,usBAeqCC,OAAlCF,EAAU,0BAI1CE,OAJkED,EAAQ,iJAU1EC,OANAL,EAAM,8IAakBK,OAPxBN,EAASO,OAAS,IACdP,EAASQ,MAAM,EAAG,KAAO,MACzBR,EACL,wHAKQM,OADiBH,EAAe,+BAC5BG,OAAJJ,EAAI,0L,CChC3B,IAAMO,EAAMC,SAASC,cAAc,aAwBnC,SAASC,IACP,IAAMC,EAJCH,SAASI,gBAAgBC,YAMhC,OAAIF,EAAQ,KACH,EACEA,EAAQ,IACV,EAEA,C,CAYX,SAASG,EAA4B/B,GACnC,GAAmB,iBAARA,IAGgB,IAAvBE,MAAMC,QAAQH,GAAlB,CAIAgC,QAAUL,IACY,IAChBM,EAjBgE,SAAlDjC,EAAKkC,EAAMF,GAC/B,IAAMG,GAASD,EAAO,GAAKF,EACrBI,EAAMD,EAAQH,EAEpB,OADoBhC,EAAIuB,MAAMY,EAAOC,E,CAchBC,CADEhD,IAC4B6C,KAAO,EAAIF,SACxDM,EAAkBL,EAAaM,KAAI,SAAAzB,G,OAAMD,EAAgBC,E,IAE/DU,EAAIgB,mBAAmB,YAAaF,EAAgBG,KAAK,IARvD,C,CA/CJjB,EAAIkB,iBAAiB,SAErB,SAAiBC,GACf,IAAMC,EAAiBD,EAAEE,OAAOC,UAAUC,MAGrB,kBAAnBH,GACmB,uBAAnBA,IAEAI,WAAaL,EAAEE,OAAOnD,GAEtBR,EAAmB8D,WACnBxB,EAAIyB,UAAY,GAChBlB,EAA4B1C,K,IA6ChC0C,EAA4B1C,I","sources":["src/js/library.js","src/js/creatCardMarkup.js","src/js/favorite.js"],"sourcesContent":["const FAVORITE_STORAGE_KEY = 'Favorite';\n\nexport function includeFavoriteNew(theNew) {\n  console.log(theNew);\n  try {\n    let curNewsArray = loadAllFavorites();\n    if (\n      typeof curNewsArray !== 'object' ||\n      Array.isArray(curNewsArray) === false\n    ) {\n      curNewsArray = [];\n      console.log(curNewsArray);\n    }\n\n    curNewsArray.unshift(theNew);\n    saveFavorites(curNewsArray);\n    return true;\n  } catch (error) {\n    console.error(error.message);\n    return false;\n  }\n}\n\nexport function excludeFavoriteNew(newId) {\n  try {\n    const curNewsArray = loadAllFavorites();\n    const foundIndex = curNewsArray.findIndex((elm, idx) => elm.id === newId);\n    curNewsArray.splice(foundIndex, 1);\n    saveFavorites(curNewsArray);\n    return true;\n  } catch (error) {\n    console.error(error.message);\n    return false;\n  }\n}\n\nexport function saveFavorites(arr) {\n  const msg = 'Wrong data to save: array with objects is expected.';\n  if (typeof arr !== 'object') {\n    console.log(msg);\n    return;\n  }\n  if (Array.isArray(arr) === false) {\n    console.log(msg);\n    return;\n  }\n  try {\n    const serializedState = JSON.stringify(arr);\n    localStorage.setItem(FAVORITE_STORAGE_KEY, serializedState);\n  } catch (error) {\n    console.error('Set state error: ', error.message);\n  }\n}\n\nexport function loadAllFavorites() {\n  try {\n    const serializedState = localStorage.getItem(FAVORITE_STORAGE_KEY);\n    return serializedState === null ? undefined : JSON.parse(serializedState);\n  } catch (error) {\n    console.error(error.message);\n  }\n}\n","function creatCardMarkup(el) {\n  const { abstract, title, url, published_date, image_url, section, id } = el;\n\n  return `<li class=\"box-news__item\" data-id=\"${id}\">\n      <p class=\"box-news__section\">${section}</p>\n          <div class=\"box-news___wrap-reading\">\n            <span class=\"box-news__reading\">Alredy read</span>\n            <svg class=\"icon\" width=\"18\" height=\"18\">\n              <use href=\"#icon-check\"></use>\n            </svg> \n          </div>\n          <button id=\"favorite-btn\" class=\"box-news__favorite-btn\">\n              <p id=\"favorite-p\" class=\"box-news__favorite-p\">Add to Favorite</p>\n              <svg class=\"box-news__favorite-svg\" width=\"16\" height=\"16\" id=\"favorite-svg\">\n                <use href=\"#icon-heart\"></use>\n              </svg>\n            </button>\n          <article>\n            <div class=\"box-news__thumb\">\n              <img class=\"box-news__img\" src=\"${image_url}\" loading=\"lazy\" alt=\"${section}\" width='440'/>\n            </div>\n          <div class=\"box-news__wrap-title\">\n            <h2 class=\"box-news__titel\">\n              ${title}\n            </h2>\n          </div>\n          <div class=\"box-news__wrap-text\">\n            <p class=\"box-news__text\">\n              ${\n                abstract.length > 120\n                  ? abstract.slice(0, 110) + '...'\n                  : abstract\n              }\n            </p>\n          </div>\n          <div class=\"box-news__wrap\">\n            <p class=\"box-news__data\">${published_date}</p>\n            <a href=\"${url}\" class=\"box-news__link\" target=\"_blank\" rel=\"noopener noreferrer nofollow\">Read more</a>\n          </div>\n          </article>\n          <div class=\"overlay\"></div>\n        </li>`;\n}\n\nexport { creatCardMarkup };\n","//------------Oleksiy Zhuravlev-----------\n\nimport { excludeFavoriteNew, loadAllFavorites } from './library.js';\nimport { creatCardMarkup } from './creatCardMarkup';\n\nconst box = document.querySelector('.box-news');\n\nbox.addEventListener('click', onClick);\n\nfunction onClick(e) {\n  const curTargetClass = e.target.classList.value;\n\n  if (\n    curTargetClass === 'box-news__btn' ||\n    curTargetClass === 'box-news__btn-icon'\n  ) {\n    currentId = +e.target.id;\n\n    excludeFavoriteNew(currentId);\n    box.innerHTML = '';\n    createPopularNewsCollection(loadAllFavorites());\n  }\n}\n\n// ф-ци возвращае ширину вью порта\nfunction checkWidth() {\n  return document.documentElement.clientWidth;\n}\n\nfunction cardsPerPage() {\n  const width = checkWidth();\n\n  if (width > 1280) {\n    return 8;\n  } else if (width > 768) {\n    return 7;\n  } else {\n    return 4;\n  }\n}\n\n// ф-ция возвращает массив карточек для рендера на текущую страницу (из текущуго массива arrCurrentNews)\nfunction displayItems(arr, page, perPage) {\n  const start = (page - 1) * perPage;\n  const end = start + perPage;\n  const paginatedEl = arr.slice(start, end);\n  return paginatedEl;\n}\n\nfunction createPopularNewsCollection(arr) {\n  if (typeof arr !== 'object') {\n    return;\n  }\n  if (Array.isArray(arr) === false) {\n    return;\n  }\n\n  perPage = cardsPerPage(); // замеряем ширину вью порта\n  const arrCurrentNews = loadAllFavorites();\n  const arrForMarkup = displayItems(arrCurrentNews, (page = 1), perPage); // массив для рендера на текущую страницу\n  const cardMarkupArray = arrForMarkup.map(el => creatCardMarkup(el)); // массив готовой разметки карточек для рендера на текущую страницу\n\n  box.insertAdjacentHTML('beforeend', cardMarkupArray.join(''));\n}\n\ncreatePopularNewsCollection(loadAllFavorites());\n"],"names":["$93effc6fc56091ad$var$FAVORITE_STORAGE_KEY","$93effc6fc56091ad$export$c91e3aec03b75cd3","newId","curNewsArray","$93effc6fc56091ad$export$c5cd7ad466e0200e","foundIndex","findIndex","elm","idx","id","splice","$93effc6fc56091ad$export$ff4b822c9af62a71","error","console","message","arr","msg","Array","isArray","serializedState","JSON","stringify","localStorage","setItem","log","getItem","undefined","parse","$d95d1fc007beb27b$export$c2172e452593faf6","el","abstract","title","url","published_date","image_url","section","concat","length","slice","$8bf2312eefa07846$var$box","document","querySelector","$8bf2312eefa07846$var$cardsPerPage","width","documentElement","clientWidth","$8bf2312eefa07846$var$createPopularNewsCollection","perPage","arrForMarkup","page","start","end","$8bf2312eefa07846$var$displayItems","cardMarkupArray","map","insertAdjacentHTML","join","addEventListener","e","curTargetClass","target","classList","value","currentId","innerHTML"],"version":3,"file":"favorite-main.2acf7040.js.map"}