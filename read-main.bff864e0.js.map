{"mappings":"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","sources":["src/js/read.js","src/js/creatCardMarkup.js"],"sourcesContent":["//-------Maks & Serj--------------\nimport {\n  loadReadStorage,\n  removeFromReadStorage,\n  getCurrentDate,\n} from './read-library';\n\nimport { creatCardMarkup } from './creatCardMarkup';\nimport { includeFavoriteNew, excludeFavoriteNew } from './library';\n// import { onButtonFavorite } from './favorite-btn-action';\n\ncreateReadMarkup();\n\nfunction createReadMarkup() {\n  const readObj = loadReadStorage();\n  const keys = Object.keys(readObj);\n\n\n    for (date of keys) {\n      // console.log(readObj[date]); // массивы объектов по датам\n      // Удаление пустого массива из Л.С.\n      if (readObj[date].length === 0) {\n        delete readObj[date];\n\n        localStorage.setItem('read', JSON.stringify(readObj));\n        location.reload();\n      }\n\n      createDateBox(date);\n    }\n\n  for (date of Object.keys(readObj)) {\n    const box = document.querySelector(`[data-date=\"${date}\"]`);\n    const wrapList = document.getElementById(`${date}`);\n    const murkupForBox = createMurkupForBoxItem();\n\n    wrapList.insertAdjacentHTML('beforeend', murkupForBox.join(''));\n  }\n}\n\nfunction createDateBox(date) {\n  const wrapBox = document.querySelector('.wrap-box');\n  const murkup = `<div data-date=\"${date}\" class=\"dateList-wrap\">\n    <div class=\"span-wrap\">\n      <span class=\"date-span open\">${date}<span class=\"arrow\"></span></span>\n    </div>\n    <ul class=\"wrap-list box-news open\" id=\"${date}\"></ul>\n  </div>`;\n\n  const makeMurkup = wrapBox.insertAdjacentHTML('afterbegin', murkup);\n\n  return;\n}\n// Массив разметки.\nfunction createMurkupForBoxItem() {\n  const readObj = loadReadStorage();\n  const getKeyValue = readObj[date]; //массив из объектов\n\n  const createMurkup = getKeyValue.map(el => {\n    const { abstract, title, url, published_date, image_url, section, id } = el;\n    // const foto = media[0] ? media[0]['media-metadata'][2].url : '';\n    const data = published_date.split('-').reverse().join('/');\n\n    return creatCardMarkup(el);\n  });\n\n  return createMurkup;\n}\n\n// console.log(createMurkupForBoxItem());\n\nconst dateSpans = document.querySelectorAll('.date-span');\ndateSpans.forEach(dateSpan => {\n  dateSpan.addEventListener('click', function () {\n    // Отримати ідентифікатор 'id' елемента <ul> за допомогою атрибуту 'id'\n    const id = this.parentElement.parentElement.querySelector('ul').id;\n    // Отримати елемент <ul> а допомогою ідентифікатора 'id'\n    const list = document.getElementById(id);\n    const arrow = dateSpan.querySelector('.arrow');\n    arrow.classList.toggle('arrow-bot');\n    list.classList.toggle('open');\n    // Змінити стиль елемента <ul>, щоб його приховати або показати(без анімації)\n    // if (list.classList.contains('active')) {\n    //   list.classList.remove('active');\n    // } else {\n    //   list.classList.add('active');\n    // }\n  });\n});\n\n\nconst box = document.querySelector('.wrap-box ');\n// console.log(box);\nbox.addEventListener('click', onButtonFavorite);\n\n// ----------------------------------------------------------\n// Без этих функций сердечки не проставляются на нашей странице\n// если массив посылать в favorite-btn-action, то он конфликтует с присланым массивом из news-list\n\nfunction onButtonFavorite(e) {\n  if (e.target.closest('BUTTON')) {\n    // кнопка\n    const favButton = e.target.closest('BUTTON');\n    // ацдишка li\n    const favId = favButton.closest('li').dataset.id;\n    // надпись на кнопке  Add to Favorite\n    const favP = favButton.querySelector('.box-news__favorite-p');\n    // svg\n    const favSvg = favButton.querySelector('.box-news__favorite-svg');\n    console.log(favP);\n\n    if (favButton.classList.contains('favorite')) {\n      offColorBtn(favButton, favId, favP, favSvg);\n    } else {\n      onColorBtn(favButton, favId, favP, favSvg);\n    }\n  }\n}\n\n// Массив объектов getArray\n\nfunction offColorBtn(favButton, favId, favP, favSvg) {\n  for (const el of getArray()) {\n    if (el.id === favId) {\n      const resultDel = excludeFavoriteNew(el.id);\n\n      // const resultDel = true;\n      if (resultDel) {\n        console.log('Удалил');\n        favButton.classList.remove('favorite');\n        favP.classList.remove('favorite-p');\n        favSvg.classList.remove('favorite-svg');\n        favP.textContent = 'Add to Favorite';\n      }\n      return;\n    }\n  }\n}\n\nfunction onColorBtn(favButton, favId, favP, favSvg) {\n  for (const el of getArray()) {\n    if (el.id === favId) {\n      const resultAdd = includeFavoriteNew(el);\n\n      // const resultAdd = true;\n      if (resultAdd) {\n        console.log('Добавил');\n        favButton.classList.add('favorite');\n        favP.classList.add('favorite-p');\n        favSvg.classList.add('favorite-svg');\n        favP.textContent = 'Remove from Favorite';\n      }\n      return;\n    }\n  }\n}\n\n// Рзглаживаем вложенные массивы из нашего Л.С. в плоский массив. \nfunction getArray() {\n  let objRead = loadReadStorage();\n  let arrRead = Object.values(objRead).flat();\n\n  return arrRead;\n}\n","import { loadAllFavorites } from './library';\nimport { loadReadStorage } from './read-library';\n\nfunction creatCardMarkup(el) {\n  const { abstract, title, url, published_date, image_url, section, id } = el;\n\n  const flags = checkRead(el);\n\n  return `<li class=\"box-news__item ${\n    flags.read ? 'show' : ''\n  }\" data-id=\"${id}\">\n      <p class=\"box-news__section\">${section}</p>\n          <div class=\"box-news___wrap-reading\">\n            <span class=\"box-news__reading\">Alredy read</span>\n            <svg class=\"icon\" width=\"18\" height=\"18\">\n              <use href=\"#icon-check\"></use>\n            </svg> \n          </div>\n          <button class=\"box-news__favorite-btn ${flags.fav ? 'favorite' : ''}\">\n              <p class=\"box-news__favorite-p\"> ${\n                flags.fav ? 'Remove from Favorite' : 'Add to Favorite'\n              }</p>\n              <svg class=\"box-news__favorite-svg\" width=\"16\" height=\"16\"\">\n                <use href=\"#icon-heart\"></use>\n              </svg>\n            </button>\n          <article>\n            <div class=\"box-news__thumb\">\n              <img class=\"box-news__img\" src=\"${image_url}\" loading=\"lazy\" alt=\"${section}\" width='440'/>\n            </div>\n          <div class=\"box-news__wrap-title\">\n            <h2 class=\"box-news__titel\">\n              ${title}\n            </h2>\n          </div>\n          <div class=\"box-news__wrap-text\">\n            <p class=\"box-news__text\">\n              ${\n                abstract.length > 120\n                  ? abstract.slice(0, 110) + '...'\n                  : abstract\n              }\n            </p>\n          </div>\n          <div class=\"box-news__wrap\">\n            <p class=\"box-news__data\">${published_date}</p>\n            <a href=\"${url}\" class=\"box-news__link\" target=\"_blank\" rel=\"noopener noreferrer nofollow\">Read more</a>\n          </div>\n          </article>\n          <div class=\"overlay\"></div>\n        </li>`;\n}\n\nexport { creatCardMarkup };\n\nfunction checkRead(obj) {\n  let arrFav = loadAllFavorites() || [];\n\n  let objRead = loadReadStorage() || {};\n  let arrRead = Object.values(objRead).flat();\n\n  const answer = arrFav.find(item => obj.id === item.id);\n\n  const reply = arrRead.find(i => obj.id === i.id);\n\n  return (rezult = {\n    fav: answer ? true : false,\n    read: reply ? true : false,\n  });\n}\n"],"names":["$aGx0e","parcelRequire","$cHsZg","$d95d1fc007beb27b$export$c2172e452593faf6","el","obj","arrFav","objRead","arrRead","answer","reply","abstract","title","url","published_date","image_url","section","id","flags","loadAllFavorites","loadReadStorage","Object","values","flat","find","item","i","rezult","fav","read","concat","length","slice","$95b4463fc8ac9448$var$createDateBox","date","wrapBox","document","querySelector","murkup","insertAdjacentHTML","$95b4463fc8ac9448$var$createMurkupForBoxItem","map","split","reverse","join","$95b4463fc8ac9448$var$getArray","readObj","keys","_iteratorNormalCompletion","_didIteratorError","_iteratorError","undefined","_step","_iterator","Symbol","iterator","next","done","value","localStorage","setItem","JSON","stringify","location","reload","err","return","_iteratorNormalCompletion1","_didIteratorError1","_iteratorError1","_step1","_iterator1","wrapList","getElementById","murkupForBox","err1","$95b4463fc8ac9448$var$createReadMarkup","querySelectorAll","forEach","dateSpan","addEventListener","this","parentElement","list","classList","toggle","e","target","closest","favButton","favId","dataset","favP","favSvg","console","log","contains","excludeFavoriteNew","remove","textContent","$95b4463fc8ac9448$var$offColorBtn","includeFavoriteNew","add","$95b4463fc8ac9448$var$onColorBtn"],"version":3,"file":"read-main.bff864e0.js.map"}