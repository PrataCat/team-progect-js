!function(){function e(e){return e&&e.__esModule?e.default:e}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},r={},n={},o=t.parcelRequire6b37;null==o&&((o=function(e){if(e in r)return r[e].exports;if(e in n){var t=n[e];delete n[e];var o={id:e,exports:{}};return r[e]=o,t.call(o.exports,o,o.exports),o.exports}var a=new Error("Cannot find module '"+e+"'");throw a.code="MODULE_NOT_FOUND",a}).register=function(e,t){n[e]=t},t.parcelRequire6b37=o);var a=o("bpxeT"),i=o("2TvXO"),l=o("ko9ms"),s=o("iF1nq"),c="Favorite";function u(e){try{var t=v();return"object"==typeof t&&!1!==Array.isArray(t)||(t=[],console.log(t)),t.unshift(e),d(t),!0}catch(e){return console.error(e.message),!1}}function f(e){try{var t=v(),r=t.findIndex((function(t,r){return t.id===e}));return t.splice(r,1),d(t),!0}catch(e){return console.error(e.message),!1}}function d(e){var t="Wrong data to save: array with objects is expected.";if("object"==typeof e)if(!1!==Array.isArray(e))try{var r=JSON.stringify(e);localStorage.setItem(c,r)}catch(e){console.error("Set state error: ",e.message)}else console.log(t);else console.log(t)}function v(){try{var e=localStorage.getItem(c);return null===e?void 0:JSON.parse(e)}catch(e){console.error(e.message)}}function y(){try{var e=localStorage.getItem("read");return null===e?{}:JSON.parse(e)}catch(e){console.log(e)}}function p(e){!function(e){var t=y(),r=!0,n=!1,o=void 0;try{for(var a,i=Object.keys(t)[Symbol.iterator]();!(r=(a=i.next()).done);r=!0){key=a.value;var l=t[key].findIndex((function(t){return t.id===e.id}));l>-1&&(console.log(t[key]),t[key].splice(l,1))}}catch(e){n=!0,o=e}finally{try{r||null==i.return||i.return()}finally{if(n)throw o}}localStorage.setItem("read",JSON.stringify(t))}(e);var t=y(),r=(new Date).toLocaleString().slice(0,10).split(".").join("/");t[r]||(t[r]=[]),t[r].push(e),localStorage.setItem("read",JSON.stringify(t))}a=o("bpxeT"),i=o("2TvXO");function g(){return m.apply(this,arguments)}function m(){return(m=e(a)(e(i).mark((function t(){var r,n,o,a;return e(i).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j();case 2:return r=e.sent,e.next=5,v();case 5:return n=e.sent,e.next=8,y();case 8:return o=e.sent,a=Object.values(o)[0],console.log("setFlags  arrRead:",o),r.map((function(e){if(n){if(n.some((function(t){return e.id===t.id}))&&(e.favor=!0),a)return void(a.some((function(t){return e.id===t.id}))&&(e.read=!0))}else if(a){a.some((function(t){return e.id===t.id}))&&(e.read=!0)}})),console.log("Это лог из action --- ",r),e.abrupt("return",r);case 14:case"end":return e.stop()}}),t)})))).apply(this,arguments)}var h=document.querySelector(".box-news");h.addEventListener("click",(function(e){if(e.target.closest("BUTTON")){var t=e.target.closest("BUTTON"),r=t.closest("li").dataset.id,n=t.querySelector(".box-news__favorite-p");t.querySelector(".box-news__favorite-svg");t.classList.contains("favorite")?function(e,t,r,n){var o=!0,a=!1,i=void 0;try{for(var l,s=j()[Symbol.iterator]();!(o=(l=s.next()).done);o=!0){var c=l.value;if(c.id===t)return void(f(c.id)&&(e.classList.remove("favorite"),r.textContent="Add to Favorite"))}}catch(e){a=!0,i=e}finally{try{o||null==s.return||s.return()}finally{if(a)throw i}}}(t,r,n):function(e,t,r,n){var o=!0,a=!1,i=void 0;try{for(var l,s=j()[Symbol.iterator]();!(o=(l=s.next()).done);o=!0){var c=l.value;if(c.id===t)return void(u(c)&&(e.classList.add("favorite"),r.textContent="Remove from Favorite"))}}catch(e){a=!0,i=e}finally{try{o||null==s.return||s.return()}finally{if(a)throw i}}}(t,r,n)}})),h.addEventListener("click",(function(e){if(e.preventDefault(),"A"===e.target.tagName){var t=e.target.closest("li").dataset.id,r=e.target.closest("li"),n=!0,o=!1,a=void 0;try{for(var i,l=j()[Symbol.iterator]();!(n=(i=l.next()).done);n=!0){var s=i.value;if(s.id===t)return p(s),void r.classList.add("show")}}catch(e){o=!0,a=e}finally{try{n||null==l.return||l.return()}finally{if(o)throw a}}}}));var x=N(),w=[],b=null;function S(e){return O.apply(this,arguments)}function O(){return(O=e(a)(e(i).mark((function t(r){var n,o;return e(i).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==w.length){e.next=5;break}return e.next=3,r();case 3:w=e.sent,console.log("createNewsCollection  arrCurrentNews:",w);case 5:return b=k(),n=T(w,1,b),e.next=9,g(n);case 9:return o=e.sent,console.log("Это лог из основного кода arrSetFlags --- ",o),e.next=13,o.map((function(e){return(0,s.creatCardMarkup)(e)}));case 13:L(e.sent);case 15:case"end":return e.stop()}}),t)})))).apply(this,arguments)}function k(){var e=N();return e>1280?8:e>768?7:4}function N(){return document.documentElement.clientWidth}function T(e,t,r){var n=(t-1)*r,o=n+r;return e.slice(n,o)}function L(e){h.insertAdjacentHTML("beforeend",e.join(""))}function j(){return w}window.addEventListener("resize",(function(){(x<768&&N()>=768||x>=768&&x<1280&&(N()<768||N()>=1280)||x>=1280&&N()<1280)&&S()})),S(l.getMostPopularArticles)}();
//# sourceMappingURL=index.d367cc78.js.map
