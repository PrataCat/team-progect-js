{"mappings":"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","sources":["src/js/favorite.js","src/js/creatCardMarkup.js"],"sourcesContent":["//------------Oleksiy Zhuravlev-----------\n\nimport { excludeFavoriteNew, loadAllFavorites } from './library.js';\nimport { creatCardMarkup } from './creatCardMarkup';\nimport { writeReadStorage } from './read-library';\n\nconst box = document.querySelector('.box-news');\n\nbox.addEventListener('click', onClick);\n\nfunction onClick(e) {\n  const curTargetClass = e.target.classList.value;\n\n  if (curTargetClass === 'box-news__favorite-p') {\n    const favButton = e.target.closest('BUTTON');\n    const favId = favButton.closest('li').dataset.id;\n\n    excludeFavoriteNew(favId);\n    box.innerHTML = '';\n    createPopularNewsCollection(loadAllFavorites());\n  }\n  //-----to Read\n  if (e.target.tagName === 'A') {\n    let currentId = e.target.closest('li').dataset.id;\n    let currentLi = e.target.closest('li');\n    const favArray = loadAllFavorites();\n    for (const el of favArray) {\n      if (el.id === currentId) {\n        writeReadStorage(el);\n        currentLi.classList.add('show');\n        return;\n      }\n    }\n  }\n}\n\n// ф-ци возвращае ширину вью порта\nfunction checkWidth() {\n  return document.documentElement.clientWidth;\n}\n\nfunction cardsPerPage() {\n  const width = checkWidth();\n\n  if (width > 1280) {\n    return 8;\n  } else if (width > 768) {\n    return 7;\n  } else {\n    return 4;\n  }\n}\n\n// ф-ция возвращает массив карточек для рендера на текущую страницу (из текущуго массива arrCurrentNews)\nfunction displayItems(arr, page, perPage) {\n  const start = (page - 1) * perPage;\n  const end = start + perPage;\n  const paginatedEl = arr.slice(start, end);\n  return paginatedEl;\n}\n\nfunction createPopularNewsCollection(arr) {\n  if (typeof arr !== 'object') {\n    return;\n  }\n  if (Array.isArray(arr) === false) {\n    return;\n  }\n\n  perPage = cardsPerPage(); // замеряем ширину вью порта\n  const arrCurrentNews = loadAllFavorites();\n  const arrForMarkup = displayItems(arrCurrentNews, (page = 1), perPage); // массив для рендера на текущую страницу\n  const cardMarkupArray = arrForMarkup.map(el => creatCardMarkup(el)); // массив готовой разметки карточек для рендера на текущую страницу\n\n  box.insertAdjacentHTML('beforeend', cardMarkupArray.join(''));\n}\n\ncreatePopularNewsCollection(loadAllFavorites());\n","import { loadAllFavorites } from './library';\nimport { loadReadStorage } from './read-library';\n\nfunction creatCardMarkup(el) {\n  const { abstract, title, url, published_date, image_url, section, id } = el;\n\n  const flags = checkRead(el);\n\n  return `<li class=\"box-news__item ${\n    flags.read ? 'show' : ''\n  }\" data-id=\"${id}\">\n      <p class=\"box-news__section\">${section}</p>\n          <div class=\"box-news___wrap-reading\">\n            <span class=\"box-news__reading\">Alredy read</span>\n            <svg class=\"icon\" width=\"18\" height=\"18\">\n              <use href=\"#icon-check\"></use>\n            </svg> \n          </div>\n          <button class=\"box-news__favorite-btn ${flags.fav ? 'favorite' : ''}\">\n              <p class=\"box-news__favorite-p\"> ${\n                flags.fav ? 'Remove from Favorite' : 'Add to Favorite'\n              }</p>\n              <svg class=\"box-news__favorite-svg\" width=\"16\" height=\"16\"\">\n                <use href=\"#icon-heart\"></use>\n              </svg>\n            </button>\n          <article>\n            <div class=\"box-news__thumb\">\n              <img class=\"box-news__img\" src=\"${image_url}\" loading=\"lazy\" alt=\"${section}\" width='440'/>\n            </div>\n          <div class=\"box-news__wrap-title\">\n            <h2 class=\"box-news__titel\">\n              ${title}\n            </h2>\n          </div>\n          <div class=\"box-news__wrap-text\">\n            <p class=\"box-news__text\">\n              ${\n                abstract.length > 120\n                  ? abstract.slice(0, 110) + '...'\n                  : abstract\n              }\n            </p>\n          </div>\n          <div class=\"box-news__wrap\">\n            <p class=\"box-news__data\">${published_date}</p>\n            <a href=\"${url}\" class=\"box-news__link\" target=\"_blank\" rel=\"noopener noreferrer nofollow\">Read more</a>\n          </div>\n          </article>\n          <div class=\"overlay\"></div>\n        </li>`;\n}\n\nexport { creatCardMarkup };\n\nfunction checkRead(obj) {\n  let arrFav = loadAllFavorites() || [];\n\n  let objRead = loadReadStorage() || {};\n  let arrRead = Object.values(objRead).flat();\n\n  const answer = arrFav.find(item => obj.id === item.id);\n\n  const reply = arrRead.find(i => obj.id === i.id);\n\n  return (rezult = {\n    fav: answer ? true : false,\n    read: reply ? true : false,\n  });\n}\n"],"names":["$cHsZg","parcelRequire","$d95d1fc007beb27b$export$c2172e452593faf6","el","obj","arrFav","objRead","arrRead","answer","reply","abstract","title","url","published_date","image_url","section","id","flags","loadAllFavorites","$aGx0e","loadReadStorage","Object","values","flat","find","item","i","rezult","fav","read","concat","length","slice","$8bf2312eefa07846$var$box","document","querySelector","$8bf2312eefa07846$var$cardsPerPage","width","documentElement","clientWidth","$8bf2312eefa07846$var$createPopularNewsCollection","arr","Array","isArray","perPage","arrForMarkup","page","start","end","$8bf2312eefa07846$var$displayItems","cardMarkupArray","map","insertAdjacentHTML","join","addEventListener","e","target","classList","value","favId","closest","dataset","excludeFavoriteNew","innerHTML","tagName","currentId","currentLi","favArray","_iteratorNormalCompletion","_didIteratorError","_iteratorError","undefined","_step","_iterator","Symbol","iterator","next","done","writeReadStorage","add","err","return"],"version":3,"file":"favorite-main.93481c16.js.map"}