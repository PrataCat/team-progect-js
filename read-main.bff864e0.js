!function(){var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},t={},n={},a=e.parcelRequire6b37;null==a&&((a=function(e){if(e in t)return t[e].exports;if(e in n){var a=n[e];delete n[e];var r={id:e,exports:{}};return t[e]=r,a.call(r.exports,r,r.exports),r.exports}var o=new Error("Cannot find module '"+e+"'");throw o.code="MODULE_NOT_FOUND",o}).register=function(e,t){n[e]=t},e.parcelRequire6b37=a);var r=a("aGx0e"),o=a("cHsZg");r=a("aGx0e");function i(e){var t,n,a,i,s,l,c=e.abstract,d=e.title,v=e.url,u=e.published_date,f=e.image_url,p=e.section,w=e.id,b=(t=e,n=(0,o.loadAllFavorites)()||[],a=(0,r.loadReadStorage)()||{},i=Object.values(a).flat(),s=n.find((function(e){return t.id===e.id})),l=i.find((function(e){return t.id===e.id})),rezult={fav:!!s,read:!!l});return'<li class="box-news__item '.concat(b.read?"show":"",'" data-id="').concat(w,'">\n      <p class="box-news__section">').concat(p,'</p>\n          <div class="box-news___wrap-reading">\n            <span class="box-news__reading">Alredy read</span>\n            <svg class="icon" width="18" height="18">\n              <use href="#icon-check"></use>\n            </svg> \n          </div>\n          <button class="box-news__favorite-btn ').concat(b.fav?"favorite":"",'">\n              <p class="box-news__favorite-p"> ').concat(b.fav?"Remove from Favorite":"Add to Favorite",'</p>\n              <svg class="box-news__favorite-svg" width="16" height="16"">\n                <use href="#icon-heart"></use>\n              </svg>\n            </button>\n          <article>\n            <div class="box-news__thumb">\n              <img class="box-news__img" src="').concat(f,'" loading="lazy" alt="').concat(p,'" width=\'440\'/>\n            </div>\n          <div class="box-news__wrap-title">\n            <h2 class="box-news__titel">\n              ').concat(d,'\n            </h2>\n          </div>\n          <div class="box-news__wrap-text">\n            <p class="box-news__text">\n              ').concat(c.length>120?c.slice(0,110)+"...":c,'\n            </p>\n          </div>\n          <div class="box-news__wrap">\n            <p class="box-news__data">').concat(u,'</p>\n            <a href="').concat(v,'" class="box-news__link" target="_blank" rel="noopener noreferrer nofollow">Read more</a>\n          </div>\n          </article>\n          <div class="overlay"></div>\n        </li>')}o=a("cHsZg");function s(e){var t=document.querySelector(".wrap-box"),n='<div data-date="'.concat(e,'" class="dateList-wrap">\n    <div class="span-wrap">\n      <span class="date-span open">').concat(e,'<span class="arrow"></span></span>\n    </div>\n    <ul class="wrap-list box-news open" id="').concat(e,'"></ul>\n  </div>');t.insertAdjacentHTML("afterbegin",n)}function l(){return(0,r.loadReadStorage)()[date].map((function(e){e.abstract,e.title,e.url;var t=e.published_date;e.image_url,e.section,e.id,t.split("-").reverse().join("/");return i(e)}))}function c(){var e=(0,r.loadReadStorage)();return Object.values(e).flat()}!function(){var e=(0,r.loadReadStorage)(),t=Object.keys(e),n=!0,a=!1,o=void 0;try{for(var i,c=t[Symbol.iterator]();!(n=(i=c.next()).done);n=!0)date=i.value,0===e[date].length&&(delete e[date],localStorage.setItem("read",JSON.stringify(e)),location.reload()),s(date)}catch(e){a=!0,o=e}finally{try{n||null==c.return||c.return()}finally{if(a)throw o}}var d=!0,v=!1,u=void 0;try{for(var f,p=Object.keys(e)[Symbol.iterator]();!(d=(f=p.next()).done);d=!0){date=f.value;document.querySelector('[data-date="'.concat(date,'"]'));var w=document.getElementById("".concat(date)),b=l();w.insertAdjacentHTML("beforeend",b.join(""))}}catch(e){v=!0,u=e}finally{try{d||null==p.return||p.return()}finally{if(v)throw u}}}(),document.querySelectorAll(".date-span").forEach((function(e){e.addEventListener("click",(function(){var t=this.parentElement.parentElement.querySelector("ul").id,n=document.getElementById(t);e.querySelector(".arrow").classList.toggle("arrow-bot"),n.classList.toggle("open")}))})),document.querySelector(".wrap-box ").addEventListener("click",(function(e){if(e.target.closest("BUTTON")){var t=e.target.closest("BUTTON"),n=t.closest("li").dataset.id,a=t.querySelector(".box-news__favorite-p"),r=t.querySelector(".box-news__favorite-svg");console.log(a),t.classList.contains("favorite")?function(e,t,n,a){var r=!0,i=!1,s=void 0;try{for(var l,d=c()[Symbol.iterator]();!(r=(l=d.next()).done);r=!0){var v=l.value;if(v.id===t)return void((0,o.excludeFavoriteNew)(v.id)&&(console.log("Удалил"),e.classList.remove("favorite"),n.classList.remove("favorite-p"),a.classList.remove("favorite-svg"),n.textContent="Add to Favorite"))}}catch(e){i=!0,s=e}finally{try{r||null==d.return||d.return()}finally{if(i)throw s}}}(t,n,a,r):function(e,t,n,a){var r=!0,i=!1,s=void 0;try{for(var l,d=c()[Symbol.iterator]();!(r=(l=d.next()).done);r=!0){var v=l.value;if(v.id===t)return void((0,o.includeFavoriteNew)(v)&&(console.log("Добавил"),e.classList.add("favorite"),n.classList.add("favorite-p"),a.classList.add("favorite-svg"),n.textContent="Remove from Favorite"))}}catch(e){i=!0,s=e}finally{try{r||null==d.return||d.return()}finally{if(i)throw s}}}(t,n,a,r)}}))}();
//# sourceMappingURL=read-main.bff864e0.js.map
