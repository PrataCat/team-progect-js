!function(){var e="Favorite";function t(e){try{var t=r(),a=t.findIndex((function(t,n){return t.id===e}));return t.splice(a,1),n(t),!0}catch(e){return console.error(e.message),!1}}function n(t){var n="Wrong data to save: array with objects is expected.";if("object"==typeof t)if(!1!==Array.isArray(t))try{var r=JSON.stringify(t);localStorage.setItem(e,r)}catch(e){console.error("Set state error: ",e.message)}else console.log(n);else console.log(n)}function r(){try{var t=localStorage.getItem(e);return null===t?void 0:JSON.parse(t)}catch(e){console.error(e.message)}}function a(){try{var e=localStorage.getItem("read");return null===e?{}:JSON.parse(e)}catch(e){console.log(e)}}function o(e){!function(e){var t=a(),n=!0,r=!1,o=void 0;try{for(var s,i=Object.keys(t)[Symbol.iterator]();!(n=(s=i.next()).done);n=!0){key=s.value;var c=t[key].findIndex((function(t){return t.id===e.id}));c>-1&&(console.log(t[key]),t[key].splice(c,1))}}catch(e){r=!0,o=e}finally{try{n||null==i.return||i.return()}finally{if(r)throw o}}localStorage.setItem("read",JSON.stringify(t))}(e);var t=a(),n=(new Date).toLocaleString().slice(0,10).split(".").join("/");t[n]||(t[n]=[]),t[n].push(e),localStorage.setItem("read",JSON.stringify(t))}function s(e){var t,n,o,s,i,c,l=e.abstract,d=e.title,u=e.url,v=e.published_date,f=e.image_url,g=e.section,_=e.id,p=(t=e,n=r()||[],o=a()||{},s=Object.values(o).flat(),i=n.find((function(e){return t.id===e.id})),c=s.find((function(e){return t.id===e.id})),{fav:!!i,read:!!c});return'<li class="box-news__item '.concat(p.read?"show":"",'" data-id="').concat(_,'">\n      <p class="box-news__section">').concat(g,'</p>\n          <div class="box-news___wrap-reading">\n            <span class="box-news__reading">Alredy read</span>\n            <svg class="icon" width="18" height="18">\n              <use href="#icon-check"></use>\n            </svg> \n          </div>\n          <button class="box-news__favorite-btn ').concat(p.fav?"favorite":"",'">\n              <p class="box-news__favorite-p"> ').concat(p.fav?"Remove from Favorite":"Add to Favorite",'</p>\n              <svg class="box-news__favorite-svg" width="16" height="16"">\n                <use href="#icon-heart"></use>\n              </svg>\n            </button>\n          <article>\n            <div class="box-news__thumb">\n              <img class="box-news__img" src="').concat(f,'" loading="lazy" alt="').concat(g,'" width=\'440\'/>\n            </div>\n          <div class="box-news__wrap-title">\n            <h2 class="box-news__titel">\n              ').concat(d,'\n            </h2>\n          </div>\n          <div class="box-news__wrap-text">\n            <p class="box-news__text">\n              ').concat(l.length>120?l.slice(0,110)+"...":l,'\n            </p>\n          </div>\n          <div class="box-news__wrap">\n            <p class="box-news__data">').concat(v,'</p>\n            <a href="').concat(u,'" class="box-news__link" target="_blank" rel="noopener noreferrer nofollow">Read more</a>\n          </div>\n          </article>\n          <div class="overlay"></div>\n        </li>')}var i=document.querySelector(".box-news"),c=document.querySelector(".footer"),l=document.querySelector(".header");function d(){var e=document.documentElement.clientWidth;return e>1280?8:e>768?7:4}function u(e){if("object"==typeof e&&!1!==Array.isArray(e)){perPage=d();var t,n=function(e,t,n){var r=(t-1)*n,a=r+n;return e.slice(r,a)}(r(),page=1,perPage);if(0===n.length)c.classList.add("footer-margin"),l.classList.add("header-margin"),t='<div class="no-results-wrap"><p class="no-results-text">'.concat("The favorite news list is empty",'</p><span class="no-results-bgr"></span></div>'),i.innerHTML=t;else{var a=n.map((function(e){return s(e)}));i.insertAdjacentHTML("beforeend",a.join(""))}}}i.addEventListener("click",(function(e){if("box-news__favorite-p"===e.target.classList.value){t(e.target.closest("BUTTON").closest("li").dataset.id),i.innerHTML="",u(r())}if("A"===e.target.tagName){var n=e.target.closest("li").dataset.id,a=e.target.closest("li"),s=r(),c=!0,l=!1,d=void 0;try{for(var v,f=s[Symbol.iterator]();!(c=(v=f.next()).done);c=!0){var g=v.value;if(g.id===n)return o(g),void a.classList.add("show")}}catch(e){l=!0,d=e}finally{try{c||null==f.return||f.return()}finally{if(l)throw d}}}})),u(r())}();
//# sourceMappingURL=favorite-main.a7dbe8ad.js.map
